{"version":3,"file":"cloudinary.js","sources":["../../../../../src/components/atoms/OakCloudinaryImage/cloudinary.ts"],"sourcesContent":["import { getCldImageUrl, type CldImageProps } from \"next-cloudinary\";\n\nexport function getCloudinaryIdFromUrl(\n  src: string | URL,\n  config?: CldImageProps[\"config\"],\n) {\n  // When a private CDN is used, CldImage will only accept the image ID as the src\n  // this appears to be a limitation of the library which appears to have been designed\n  // with basic public CDN usage in mind.\n  return src.toString().replace(getCloudinaryRootUrl(config), \"\");\n}\n\n// Attempts to build the stem of a cloudinary URL, this is used to extract the image id\nfunction getCloudinaryRootUrl(config?: CldImageProps[\"config\"]) {\n  // `getCldImageUrl` handles all the logic to construct a cloudinary URL from the given config\n  // (supporting private CDNs, custom CNAMES etc. so we don't have to)\n  const canaryUrl = new URL(getCldImageUrl({ src: \"canary.jpg\" }, config));\n  return canaryUrl.origin + \"/image/upload/\";\n}\n"],"names":["src","config","toString","replace","canaryUrl","URL","getCldImageUrl","origin","getCloudinaryRootUrl"],"mappings":"6EAEgB,SACdA,EACAC,GAKA,OAAOD,EAAIE,WAAWC,QAIxB,SAA8BF,GAG5B,MAAMG,EAAY,IAAIC,IAAIC,EAAcA,eAAC,CAAEN,IAAK,cAAgBC,IAChE,OAAOG,EAAUG,OAAS,gBAC5B,CATgCC,CAAqBP,GAAS,GAC9D"}