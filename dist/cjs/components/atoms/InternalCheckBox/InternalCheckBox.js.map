{"version":3,"file":"InternalCheckBox.js","sources":["../../../../../src/components/atoms/InternalCheckBox/InternalCheckBox.tsx"],"sourcesContent":["import React, { forwardRef, useRef } from \"react\";\nimport styled, { css } from \"styled-components\";\n\nimport { OakBorderRadiusToken, OakCombinedColorToken } from \"@/styles\";\nimport { parseBorderRadius } from \"@/styles/helpers/parseBorderRadius\";\nimport { parseColor } from \"@/styles/helpers/parseColor\";\nimport { parseDropShadow } from \"@/styles/helpers/parseDropShadow\";\nimport { BorderStyleProps, borderStyle } from \"@/styles/utils/borderStyle\";\nimport { ColorStyleProps, colorStyle } from \"@/styles/utils/colorStyle\";\nimport { SizeStyleProps, sizeStyle } from \"@/styles/utils/sizeStyle\";\nimport { SpacingStyleProps, spacingStyle } from \"@/styles/utils/spacingStyle\";\n\n/**\n *\n * These components can be used with InternalCheckBoxWrapper which allows for customisable icons\n *\n * Several flavours of checkbox are created here:\n *  - Default\n *  - Hover decorations\n *  - Focus decorations\n *  - Hover + Focus decorations\n *\n * As they are styled components they can be further customised in implementation. Alternatively additional\n * components can be created here.\n *\n */\n\nexport type BaseCheckBoxProps = {\n  id: string;\n  disabled?: boolean;\n  value: string;\n  name?: string;\n  /**\n   * Uncontrolled checked state\n   */\n  defaultChecked?: boolean;\n  /**\n   * Controlled checked state\n   */\n  checked?: boolean;\n  onHovered?: (value: string, id: string, duration: number) => void;\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  onFocus?: (event: React.FocusEvent<HTMLInputElement>) => void;\n  onBlur?: (event: React.FocusEvent<HTMLInputElement>) => void;\n  \"aria-label\"?: string;\n  \"aria-labelledby\"?: string;\n  \"data-testid\"?: string;\n};\n\nconst BaseCheckBox = forwardRef(\n  (props: BaseCheckBoxProps, ref?: React.Ref<HTMLInputElement>) => {\n    const { onHovered, ...rest } = props;\n\n    const hoverStart = useRef(Date.now());\n\n    const handleMouseEnter = () => {\n      hoverStart.current = Date.now();\n    };\n\n    const handleMouseLeave = () => {\n      const delta = Date.now() - hoverStart.current;\n      if (onHovered) {\n        onHovered(props.value, props.id, delta);\n      }\n    };\n\n    return (\n      <input\n        ref={ref}\n        type=\"checkbox\"\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        name={props.id}\n        {...rest}\n      />\n    );\n  },\n);\n\ntype StyledBaseCheckBoxProps = BaseCheckBoxProps &\n  ColorStyleProps &\n  SpacingStyleProps &\n  BorderStyleProps &\n  SizeStyleProps & {\n    $checkedBackground?: OakCombinedColorToken | null;\n    $checkedBorderColor?: OakCombinedColorToken;\n    $uncheckedBorderColor?: OakCombinedColorToken;\n  };\n\ntype HoverBaseCheckBoxProps = {\n  $hoverBorderRadius: OakBorderRadiusToken;\n};\n\n/**\n *\n * These components can be used with InternalCheckBoxWrapper which allows for customisable icons\n *\n * Several flavours of checkbox are created here:\n *  - Default\n *  - Hover decorations\n *  - Focus decorations\n *  - Hover + Focus decorations\n *\n * NB. Hover decorations must be wrapped in a box with position relative to allow for the hover effect to work\n *\n * As they are styled components they can be further customised in implementation. Alternatively additional\n * components can be created here.\n *\n *\n * ## Events\n * The following callbacks are available for tracking focus events:\n *\n * ### onChange\n * onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n *\n * ### onFocus\n *   onFocus?: (event: React.FocusEvent<HTMLInputElement>) => void;\n *\n * ### onBlur\n *    onBlur?: (event: React.FocusEvent<HTMLInputElement>) => void;\n *\n * ### onHovered\n *  `onHovered?: (id, value, duration: number) => void;`<br>\n *  called after a mouseEnter and mouseLeave event has happened\n *\n *\n */\nexport const InternalCheckBox = styled(BaseCheckBox)<StyledBaseCheckBoxProps>`\n  /* removing default appearance */\n  -webkit-appearance: none;\n  appearance: none;\n  cursor: pointer;\n  margin: 0;\n  outline: none;\n  ${borderStyle}\n  ${colorStyle}\n  ${spacingStyle}\n  ${sizeStyle}\n\n  border-color: ${(props) => parseColor(props.$uncheckedBorderColor)};\n\n  &:checked {\n    ${(props) => css`\n      background: ${parseColor(props.$checkedBackground)};\n      border-color: ${parseColor(props.$checkedBorderColor)};\n    `};\n  }\n\n  &:disabled {\n    pointer-events: none;\n  }\n\n  @media (hover: hover) {\n    &:hover:not(:disabled) {\n      border-color: ${(props) => parseColor(props.$checkedBackground)};\n    }\n  }\n`;\n\nInternalCheckBox.defaultProps = {\n  $borderRadius: \"border-radius-xs\",\n  $ba: \"border-solid-m\",\n  $borderColor: \"text-primary\",\n  $checkedBackground: \"text-primary\",\n};\n\nexport const InternalCheckBoxHover = styled(InternalCheckBox)<\n  StyledBaseCheckBoxProps & HoverBaseCheckBoxProps\n>`\n  /* @media wrapper is required to prevent hover effect on iOS Safari */\n\n  @media (hover: hover) {\n    &:hover:not(&:checked):not(&:disabled)::after {\n      content: \"\";\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      width: 60%;\n      height: 60%;\n      transform: translate(-50%, -50%);\n      border-radius: ${(props) => parseBorderRadius(props.$hoverBorderRadius)};\n      background: ${(props) => parseColor(props.$checkedBackground)};\n    }\n  }\n`;\n\nInternalCheckBoxHover.defaultProps = {\n  $hoverBorderRadius: \"border-radius-xs\",\n};\n\nconst focusStyle = css`\n  &:focus-visible {\n    box-shadow: ${parseDropShadow(\"drop-shadow-centered-lemon\")};\n  }\n`;\n\nexport const InternalCheckBoxFocus = styled(\n  InternalCheckBox,\n)<StyledBaseCheckBoxProps>`\n  ${focusStyle}\n`;\n\nexport const InternalCheckBoxHoverFocus = styled(InternalCheckBoxHover)<\n  StyledBaseCheckBoxProps & HoverBaseCheckBoxProps\n>`\n  ${focusStyle}\n`;\n"],"names":["BaseCheckBox","forwardRef","props","ref","onHovered","rest","hoverStart","useRef","Date","now","React","createElement","type","onMouseEnter","current","onMouseLeave","delta","value","id","name","InternalCheckBox","styled","borderStyle","colorStyle","spacingStyle","sizeStyle","parseColor","$uncheckedBorderColor","css","$checkedBackground","$checkedBorderColor","defaultProps","$borderRadius","$ba","$borderColor","InternalCheckBoxHover","parseBorderRadius","$hoverBorderRadius","focusStyle","parseDropShadow","InternalCheckBoxHoverFocus"],"mappings":"wgBAiDA,MAAMA,EAAeC,EAAUA,YAC7B,CAACC,EAA0BC,KACzB,MAAMC,UAAEA,KAAcC,GAASH,EAEzBI,EAAaC,EAAMA,OAACC,KAAKC,OAa/B,OACEC,EAAAA,QACEC,cAAA,QAAA,CAAAR,IAAKA,EACLS,KAAK,WACLC,aAfqB,KACvBP,EAAWQ,QAAUN,KAAKC,KAAK,EAe7BM,aAZqB,KACvB,MAAMC,EAAQR,KAAKC,MAAQH,EAAWQ,QAClCV,GACFA,EAAUF,EAAMe,MAAOf,EAAMgB,GAAIF,EAClC,EASCG,KAAMjB,EAAMgB,MACRb,GAEN,IAoDOe,EAAmBC,EAAAA,QAAOrB,EAAsC;;;;;;;IAOzEsB;IACAC;IACAC;IACAC;;kBAEevB,GAAUwB,EAAAA,WAAWxB,EAAMyB;;;MAGvCzB,GAAU0B,EAAAA,GAAG;oBACAF,EAAUA,WAACxB,EAAM2B;sBACfH,EAAUA,WAACxB,EAAM4B;;;;;;;;;;sBAUhB5B,GAAUwB,EAAAA,WAAWxB,EAAM2B;;;EAKlDT,EAAiBW,aAAe,CAC9BC,cAAe,mBACfC,IAAK,iBACLC,aAAc,eACdL,mBAAoB,sBAGTM,EAAwBd,EAAAA,QAAOD,EAE3C;;;;;;;;;;;;uBAYuBlB,GAAUkC,EAAAA,kBAAkBlC,EAAMmC;oBACrCnC,GAAUwB,EAAAA,WAAWxB,EAAM2B;;;EAKhDM,EAAsBJ,aAAe,CACnCM,mBAAoB,oBAGtB,MAAMC,EAAaV,EAAGA,GAAA;;kBAEJW,EAAAA,gBAAgB;;EAIGlB,EAAAA,QACnCD,EACwB;IACtBkB;QAGSE,EAA6BnB,EAAAA,QAAOc,EAEhD;IACGG;"}