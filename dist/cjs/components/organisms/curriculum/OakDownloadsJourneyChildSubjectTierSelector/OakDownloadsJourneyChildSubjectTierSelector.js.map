{"version":3,"file":"OakDownloadsJourneyChildSubjectTierSelector.js","sources":["../../../../../../src/components/organisms/curriculum/OakDownloadsJourneyChildSubjectTierSelector/OakDownloadsJourneyChildSubjectTierSelector.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport styled, { css } from \"styled-components\";\n\nimport { OakFlex } from \"@/components/atoms\";\nimport {\n  OakInlineBanner,\n  OakPrimaryButton,\n  OakRadioButton,\n  OakRadioGroup,\n} from \"@/components/molecules\";\n\nexport interface Tier {\n  tier: string;\n  tierSlug: string;\n}\nexport interface Subject {\n  subject: string;\n  subjectSlug: string;\n}\n\nexport type OakDownloadsJourneyChildSubjectTierSelectorProps = {\n  /* An array of Tier objects containing `tier` and `tierSlug` */\n  tiers?: Tier[];\n  /* An array of Subject objects containing `subject` and `subjectSlug` */\n  childSubjects?: Subject[];\n  /* Callback function which returns the selected tier and subject once the Next button is pressed. */\n  getTierSubjectValues: (\n    tierSlug: string,\n    childSubjectSlug: string | null,\n  ) => void;\n};\n\nconst OakDownloadsJourneyChildSubjectTierSelectorCss = css<OakDownloadsJourneyChildSubjectTierSelectorProps>``;\n\nconst UnstyledComponent = (\n  props: OakDownloadsJourneyChildSubjectTierSelectorProps,\n) => {\n  const { childSubjects, tiers, getTierSubjectValues } = props;\n\n  const [childSubjectSelected, setChildSubjectSelected] = useState<\n    string | null\n  >(childSubjects && childSubjects[0] ? childSubjects[0]?.subjectSlug : null);\n  const [tierSelected, setTierSelected] = useState<string>(\"foundation\");\n\n  const tiersAvailable = tiers && tierSelected.length > 0;\n  const childSubjectsAvailable = childSubjects && childSubjects.length > 0;\n  function handleChildSubjectSelection(\n    e: React.ChangeEvent<HTMLInputElement>,\n  ): void {\n    const childSubjectSlug = e.currentTarget.value;\n    setChildSubjectSelected(childSubjectSlug);\n  }\n\n  function handleTierSelection(e: React.ChangeEvent<HTMLInputElement>): void {\n    const tierSlug = e.currentTarget.value;\n    setTierSelected(tierSlug);\n  }\n\n  function handleNextClick() {\n    getTierSubjectValues(tierSelected, childSubjectSelected);\n  }\n\n  return (\n    <OakFlex $flexDirection={\"column\"} $gap={\"space-between-m\"}>\n      <OakInlineBanner\n        isOpen={true}\n        message={`Before downloading, choose ${\n          childSubjectsAvailable && tiersAvailable ? \"options\" : \"an option\"\n        } for KS4. The document will still display both KS3 and KS4.`}\n        $maxWidth={\"all-spacing-22\"}\n      />\n\n      {childSubjectsAvailable && (\n        <OakRadioGroup\n          label=\"Choose subject for KS4 units\"\n          name=\"childSubjectRadio\"\n          onChange={handleChildSubjectSelection}\n          $flexDirection={\"column\"}\n          $gap={\"space-between-s\"}\n          defaultValue={childSubjectSelected || \"combined-science\"}\n          data-testid=\"child-subject-selector\"\n        >\n          {childSubjects.map(\n            ({\n              subject,\n              subjectSlug,\n            }: {\n              subject: string;\n              subjectSlug: string;\n            }) => (\n              <OakRadioButton\n                id={subjectSlug}\n                label={subject}\n                value={subjectSlug}\n                data-testid=\"child-subject-radio-button\"\n                key={subjectSlug}\n              />\n            ),\n          )}\n        </OakRadioGroup>\n      )}\n\n      {tiersAvailable && (\n        <OakRadioGroup\n          data-testid=\"tier-selector\"\n          label=\"Choose learning tier for KS4 units\"\n          name=\"tierRadio\"\n          onChange={handleTierSelection}\n          $flexDirection={\"column\"}\n          $gap={\"space-between-s\"}\n          defaultValue={tierSelected}\n        >\n          {tiers.map(\n            ({ tier, tierSlug }: { tier: string; tierSlug: string }) => (\n              <OakRadioButton\n                id={tierSlug}\n                label={tier}\n                value={tierSlug}\n                data-testid=\"tier-radio-button\"\n                key={tierSlug}\n              />\n            ),\n          )}\n        </OakRadioGroup>\n      )}\n\n      <OakPrimaryButton\n        iconName=\"arrow-right\"\n        isTrailingIcon={true}\n        onClick={handleNextClick}\n      >\n        Next\n      </OakPrimaryButton>\n    </OakFlex>\n  );\n};\n\n/**\n *\n * The component is used in the Curriculum Downloads journey for KS4 Maths and Science, where a tier\n * must be selected before download (Maths) as well as a child subject (Science).\n *\n * ### Callbacks\n * `getTierSubjectValues(tier, childSubject)`: a callback function to retrieve the selected values\n * once the Next button is pressed to continue on the Downloads journey.\n *\n */\nexport const OakDownloadsJourneyChildSubjectTierSelector = styled(\n  UnstyledComponent,\n)`\n  ${OakDownloadsJourneyChildSubjectTierSelectorCss}\n`;\n"],"names":["OakDownloadsJourneyChildSubjectTierSelectorCss","css","OakDownloadsJourneyChildSubjectTierSelector","styled","props","childSubjects","tiers","getTierSubjectValues","childSubjectSelected","setChildSubjectSelected","useState","subjectSlug","tierSelected","setTierSelected","tiersAvailable","length","childSubjectsAvailable","React","createElement","OakFlex","$flexDirection","default","OakInlineBanner","isOpen","message","$maxWidth","OakRadioGroup","label","name","onChange","e","childSubjectSlug","currentTarget","value","$gap","defaultValue","map","subject","OakRadioButton","id","key","tierSlug","tier","OakPrimaryButton","iconName","isTrailingIcon","onClick"],"mappings":"y7GAgCA,MAAMA,EAAiDC,EAAAA,GAAqD,GAmH/FC,EAA8CC,EAAAA,SAhHzDC,IAEA,MAAMC,cAAEA,EAAaC,MAAEA,EAAKC,qBAAEA,GAAyBH,GAEhDI,EAAsBC,GAA2BC,EAAAA,SAEtDL,GAAiBA,EAAc,GAAKA,EAAc,IAAIM,YAAc,OAC/DC,EAAcC,GAAmBH,EAAQA,SAAS,cAEnDI,EAAiBR,GAASM,EAAaG,OAAS,EAChDC,EAAyBX,GAAiBA,EAAcU,OAAS,EAiBvE,OACEE,EAAAA,QAACC,cAAAC,EAAOA,QAAiB,CAAAC,eAAA,cAAgB,mBACvCH,EAACI,QAAAH,cAAAI,EAAeA,iBACdC,QAAQ,EACRC,QAAS,8BACPR,GAA0BF,EAAiB,UAAY,yEAE9CW,UAAA,mBAGZT,GACCC,EAAAA,QAACC,cAAAQ,EAAaA,cACZ,CAAAC,MAAM,+BACNC,KAAK,oBACLC,SA9BR,SACEC,GAEA,MAAMC,EAAmBD,EAAEE,cAAcC,MACzCxB,EAAwBsB,EACzB,EAyB4CX,eACrB,SAAQc,KAClB,kBACNC,aAAc3B,GAAwB,mBAC1B,cAAA,0BAEXH,EAAc+B,KACb,EACEC,UACA1B,iBAKAM,EAAAI,QAAAH,cAACoB,EAAAA,eAAc,CACbC,GAAI5B,EACJgB,MAAOU,EACPJ,MAAOtB,gBACK,6BACZ6B,IAAK7B,OAOdG,GACCG,EAAAA,QAACC,cAAAQ,EAAaA,cACA,CAAA,cAAA,gBACZC,MAAM,qCACNC,KAAK,YACLC,SAtDR,SAA6BC,GAC3B,MAAMW,EAAWX,EAAEE,cAAcC,MACjCpB,EAAgB4B,EACjB,EAmDoCrB,eACb,SAAQc,KAClB,kBACNC,aAAcvB,GAEbN,EAAM8B,KACL,EAAGM,OAAMD,cACPxB,EAAAA,QAAAC,cAACoB,EAAcA,eAAA,CACbC,GAAIE,EACJd,MAAOe,EACPT,MAAOQ,gBACK,oBACZD,IAAKC,OAOfxB,EAAAA,QAAAC,cAACyB,mBACC,CAAAC,SAAS,cACTC,gBAAgB,EAChBC,QAvEN,WACEvC,EAAqBK,EAAcJ,EACpC,GAwEsB,QAErB,GAeH;IACGR;"}