"use strict";var e=require("react"),r=require("@dnd-kit/core"),a=require("@dnd-kit/sortable"),t=require("@dnd-kit/utilities"),o=require("react-dom");require("../../../../atoms/OakAnchorTarget/OakAnchorTarget.js"),require("../../../../atoms/OakAspectRatio/OakAspectRatio.js"),require("../../../../atoms/OakBox/OakBox.js"),require("../../../../atoms/OakCloudinaryImage/OakCloudinaryImage.js");var n=require("../../../../atoms/OakFlex/OakFlex.js");require("../../../../atoms/OakForm/OakForm.js"),require("../../../../atoms/OakGlobalStyle/OakGlobalStyle.js"),require("../../../../atoms/OakGrid/OakGrid.js"),require("../../../../atoms/OakGridArea/OakGridArea.js"),require("../../../../atoms/OakHeading/OakHeading.js"),require("../../../../atoms/OakImage/OakImage.js"),require("../../../../atoms/OakSpan/OakSpan.js"),require("../../../../atoms/OakLI/OakLI.js"),require("../../../../atoms/OakLabel/OakLabel.js"),require("../../../../atoms/OakMaxWidth/OakMaxWidth.js"),require("../../../../atoms/OakOL/OakOL.js"),require("../../../../atoms/OakFieldset/OakFieldset.js"),require("../../../../atoms/OakP/OakP.js"),require("../../../../atoms/OakScreenReader/OakScreenReader.js"),require("styled-components"),require("../../../../atoms/OakTypography/OakTypography.js"),require("../../../../atoms/OakUL/OakUL.js"),require("../../../../atoms/OakSvg/OakSvg.js"),require("../../../../molecules/OakAccordion/OakAccordion.js"),require("../../../../molecules/OakBackLink/OakBackLink.js"),require("../../../../molecules/OakButtonAsRadioGroup/OakButtonAsRadioGroup.js"),require("../../../../atoms/InternalCardWithBackgroundElement/InternalCardWithBackgroundElement.js"),require("../../../../atoms/InternalStyledSvg/InternalStyledSvg.js"),require("../../../../atoms/InternalCheckBox/InternalCheckBox.js"),require("../../../../atoms/InternalCheckBoxLabel/InternalCheckBoxLabel.js"),require("../../../../atoms/InternalCheckBoxWrapper/InternalCheckBoxWrapper.js"),require("../../../../molecules/OakCollapsibleContent/OakCollapsibleContent.js");var i=require("../../../../molecules/OakDragAndDropInstructions/OakDragAndDropInstructions.js"),s=require("../../../../molecules/OakDraggable/OakDraggable.js"),l=require("../../../../molecules/OakDroppable/OakDroppable.js");require("../../../../molecules/OakHandDrawnFocusUnderline/OakHandDrawnFocusUnderline.js"),require("../../../../molecules/OakHandDrawnHR/OakHandDrawnHR.js"),require("../../../../molecules/InternalShadowRoundButton/InternalShadowRoundButton.js"),require("../../../../molecules/OakLink/OakLink.js"),require("../../../../molecules/OakLoadingSpinner/OakLoadingSpinner.js"),require("../../../../molecules/OakModal/OakModal.js"),require("../../../../molecules/OakModalCenter/OakModalCenter.js"),require("../../../../molecules/OakOutlineAccordion/OakOutlineAccordion.js"),require("../../../../molecules/InternalShadowRectButton/InternalShadowRectButton.js"),require("../../../../molecules/OakPromoTag/OakPromoTag.js"),require("../../../../molecules/OakRadioButton/OakRadioButton.js"),require("../../../../molecules/OakRadioGroup/OakRadioGroup.js"),require("../../../../molecules/OakRadioTile/OakRadioTile.js"),require("../../../../molecules/OakSecondaryLink/OakSecondaryLink.js"),require("../../../../molecules/OakFilterDrawer/OakFilterDrawer.js"),require("../../../../molecules/OakTextInput/OakTextInput.js"),require("../../../../atoms/InternalTooltip/InternalTooltip.js"),require("../../../../molecules/OakTimer/OakTimer.js");var u=require("../../../../molecules/OakCodeRenderer/OakCodeRenderer.js"),d=require("../../../../atoms/InternalDndContext/InternalDndContext.js"),k=require("../../../../../animation/usePrefersReducedMotion.js");function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var O=c(e);const m=({id:e,label:r,isHighlighted:o})=>{const{attributes:n,listeners:i,setNodeRef:d,transform:k,transition:c,isOver:m,isDragging:g}=a.useSortable({id:e}),q={transform:t.CSS.Transform.toString(k),transition:c};return O.default.createElement(l.OakDroppable,{isOver:m,isHighlighted:o},O.default.createElement(s.OakDraggable,{ref:d,style:q,isDisabled:g,...n,...i,"aria-describedby":void 0,"aria-roledescription":"sortable item","aria-pressed":void 0,"aria-selected":!!n["aria-pressed"],role:"option"},O.default.createElement(u.OakCodeRenderer,{string:r})))};function g(e){const r=r=>e.findIndex((e=>e.id===r))+1,a=r=>e.find((e=>e.id===r))?.label;return{onDragStart(){},onDragOver({active:t,over:o}){if(o)return`Sortable item ${a(t.id)} is in position ${r(o.id)} of ${e.length}`},onDragEnd({active:t,over:o}){if(o)return`Sortable item ${a(t.id)} was dropped into position ${r(o.id)} of ${e.length}`},onDragCancel:({active:e})=>`Dragging was cancelled. Sortable item ${a(e.id)} was dropped.`}}exports.OakQuizOrder=({initialItems:t,onChange:l,isHighlighted:c})=>{const[q,j]=e.useState(t),[p,S]=e.useState(null),b=q.find((e=>e.id===p)),f=r.useSensors(r.useSensor(r.MouseSensor),r.useSensor(r.TouchSensor),r.useSensor(r.KeyboardSensor,{coordinateGetter:a.sortableKeyboardCoordinates,scrollBehavior:k.usePrefersReducedMotion()?"instant":"smooth"}));return O.default.createElement(O.default.Fragment,null,O.default.createElement(i.OakDragAndDropInstructions,{$mb:"space-between-m2"}),O.default.createElement(d.InternalDndContext,{sensors:f,collisionDetection:r.closestCenter,onDragEnd:function(e){const{active:r,over:t}=e;r.id!==t?.id&&j((e=>{const o=e.findIndex((e=>e.id===r.id)),n=e.findIndex((e=>e.id===t?.id)),i=a.arrayMove(e,o,n);return l?.(i),i}));S(null)},onDragStart:function(e){const{active:r}=e;S(r.id.toString())},accessibility:{announcements:g(q)}},O.default.createElement(a.SortableContext,{items:q,strategy:a.verticalListSortingStrategy},O.default.createElement(n.OakFlex,{$gap:"space-between-s",$flexDirection:"column",role:"listbox","aria-label":"Sortable items"},q.map((e=>O.default.createElement(m,{key:e.id,...e,isHighlighted:c})))),o.createPortal(O.default.createElement(r.DragOverlay,null,b&&O.default.createElement(s.OakDraggable,{isDragging:!0},O.default.createElement(u.OakCodeRenderer,{string:b.label}))),document.body))))};
//# sourceMappingURL=OakQuizOrder.js.map
