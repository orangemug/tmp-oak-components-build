{"version":3,"file":"OakMediaClip.js","sources":["../../../../../../src/components/organisms/shared/OakMediaClip/OakMediaClip.tsx"],"sourcesContent":["import React from \"react\";\nimport styled, { css } from \"styled-components\";\n\nimport { OakFlex } from \"@/components/atoms/OakFlex\";\nimport { StyledButtonWrapper } from \"@/components/molecules/InternalShadowRectButton\";\nimport {\n  OakBox,\n  OakHeading,\n  OakIcon,\n  OakImage,\n  OakP,\n  OakLI,\n  oakPlaceholder,\n  placeholderStyles,\n} from \"@/components/atoms\";\nimport { OakCombinedColorToken } from \"@/styles\";\nimport { InternalButton } from \"@/components/atoms/InternalButton\";\nimport { sizeStyle, SizeStyleProps } from \"@/styles/utils/sizeStyle\";\nimport { positionStyle } from \"@/styles/utils/positionStyle\";\nimport { parseColor } from \"@/styles/helpers/parseColor\";\nimport { OakTagFunctional, OakTimer } from \"@/components/molecules\";\n\ntype MuxPlayingState = \"standard\" | \"playing\" | \"played\";\n\nexport type OakMediaClipProps = {\n  thumbnailImage?: string;\n  timeCode: number;\n  clipName: string;\n  learningCycle?: string;\n  muxPlayingState: MuxPlayingState;\n  onClick: () => void;\n  disabled?: boolean;\n  imageAltText: string;\n  isAudioClip?: boolean;\n  element?: \"button\" | \"a\";\n};\n\ntype MediaClipStyles = {\n  [K in\n    | \"defaultBackground\"\n    | \"defaultTextColor\"\n    | \"hoverBackground\"\n    | \"hoverTextColor\"\n    | \"clipNameTitle\"]: OakCombinedColorToken;\n};\n\nconst getButtonStyles = (muxPlayingState: MuxPlayingState): MediaClipStyles => {\n  switch (muxPlayingState) {\n    case \"standard\":\n      return {\n        defaultBackground: \"bg-primary\",\n        defaultTextColor: \"text-inverted\",\n        hoverBackground: \"bg-btn-secondary-hover\",\n        hoverTextColor: \"text-primary\",\n        clipNameTitle: \"text-primary\",\n      };\n    case \"playing\":\n      return {\n        defaultBackground: \"bg-decorative1-subdued\",\n        defaultTextColor: \"text-primary\",\n        hoverBackground: \"bg-decorative1-main\",\n        hoverTextColor: \"text-primary\",\n        clipNameTitle: \"text-primary\",\n      };\n    case \"played\":\n      return {\n        defaultBackground: \"bg-primary\",\n        defaultTextColor: \"text-subdued\",\n        hoverBackground: \"bg-btn-secondary-hover\",\n        hoverTextColor: \"text-primary\",\n        clipNameTitle: \"text-subdued\",\n      };\n  }\n};\nconst MediaButtonWrapper = styled(StyledButtonWrapper)`\n  min-height: 72px;\n  width: 100%;\n`;\n\nexport const StyledMediaClipImage = styled(OakImage)`\n  ${placeholderStyles}\n`;\n\nconst ImageBox = styled(OakFlex)<{ disabled?: boolean }>`\n  img {\n    border-radius: 2px;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n\n  ${(props) =>\n    props.disabled &&\n    css`\n      &::after {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: lightgray;\n        opacity: 0.5;\n        border-radius: 2px;\n      }\n    `}\n`;\n\nconst TextBox = styled(OakFlex)`\n  position: \"relative\";\n  overflow: hidden;\n  text-overflow: ellipsis;\n  h4 {\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    -webkit-line-clamp: 3;\n  }\n`;\n\nconst StyledInternalButton = styled(InternalButton)<\n  SizeStyleProps & {\n    $defaultTextColor: OakCombinedColorToken;\n    $defaultBackground: OakCombinedColorToken;\n    $defaultBorderColor: OakCombinedColorToken;\n    $hoverTextColor: OakCombinedColorToken;\n    $hoverBackground: OakCombinedColorToken;\n    $hoverBorderColor: OakCombinedColorToken;\n    $disabledBackground: OakCombinedColorToken;\n    $disabledBorderColor: OakCombinedColorToken;\n    $disabledTextColor: OakCombinedColorToken;\n  }\n>`\n  ${positionStyle}\n  ${sizeStyle}\n  display: inline-block;\n  transition: opacity 300ms ease-out;\n  ${(props) => css`\n    &:hover {\n      h4 {\n        text-decoration: ${props.muxPlayingState === \"standard\"\n          ? \"underline\"\n          : \"none\"};\n      }\n      color: ${parseColor(props.$hoverTextColor)};\n      background: ${parseColor(props.$hoverBackground)};\n      border-color: ${parseColor(props.$hoverBorderColor)};\n    }\n    &:active {\n      background: ${parseColor(props.$defaultBackground)};\n      border-color: ${parseColor(props.$defaultBorderColor)};\n      color: ${parseColor(props.$defaultTextColor)};\n    }\n    &:disabled {\n      background: ${parseColor(props.$disabledBackground)};\n      border-color: ${parseColor(props.$disabledBorderColor)};\n      color: ${parseColor(props.$disabledTextColor)};\n    }\n  `}\n`;\n\nexport const OakMediaClip = ({\n  thumbnailImage,\n  timeCode,\n  clipName,\n  learningCycle,\n  muxPlayingState,\n  onClick,\n  disabled,\n  imageAltText,\n  isAudioClip,\n  element = \"button\",\n}: OakMediaClipProps) => {\n  const buttonStyles = getButtonStyles(muxPlayingState);\n\n  return (\n    <OakLI $mb={\"space-between-ssx\"}>\n      <MediaButtonWrapper\n        $position={\"relative\"}\n        $borderRadius={\"border-radius-s\"}\n      >\n        <OakBox\n          className=\"grey-shadow\"\n          $position={\"absolute\"}\n          $borderRadius={\"border-radius-s\"}\n          $width={\"100%\"}\n          $height={\"100%\"}\n          $top=\"all-spacing-0\"\n        />\n\n        <OakBox\n          className=\"yellow-shadow\"\n          $position={\"absolute\"}\n          $borderRadius={\"border-radius-s\"}\n          $width={\"100%\"}\n          $height={\"100%\"}\n          $top=\"all-spacing-0\"\n        />\n        <StyledInternalButton\n          element={element}\n          tabIndex={0}\n          className=\"internal-button\"\n          $width={\"100%\"}\n          $height={\"100%\"}\n          $background={buttonStyles.defaultBackground}\n          $borderColor=\"transparent\"\n          $borderRadius={\"border-radius-s\"}\n          $position={\"relative\"}\n          disabled={disabled}\n          defaultBorderColor=\"transparent\"\n          $color={buttonStyles.defaultTextColor}\n          $hoverBackground={buttonStyles.hoverBackground}\n          $hoverBorderColor=\"transparent\"\n          $hoverTextColor=\"text-primary\"\n          $disabledBackground=\"bg-btn-secondary-disabled\"\n          $disabledBorderColor=\"text-disabled\"\n          $disabledTextColor=\"text-disabled\"\n          justifyContent={\"flex-start\"}\n          onClick={onClick}\n          $pa={\"inner-padding-xs\"}\n          muxPlayingState={muxPlayingState}\n        >\n          <OakFlex\n            $flexDirection={\"row\"}\n            $alignItems={\"center\"}\n            $width={\"100%\"}\n          >\n            <>\n              <ImageBox\n                $height={\"all-spacing-10\"}\n                $width={\"all-spacing-15\"}\n                $borderRadius={\"border-radius-xs\"}\n                $mr={\"space-between-s\"}\n                $position={\"relative\"}\n                disabled={disabled}\n                $flexShrink={0}\n              >\n                {!isAudioClip && thumbnailImage ? (\n                  <StyledMediaClipImage\n                    fill\n                    $height={\"100%\"}\n                    $width={\"100%\"}\n                    src={thumbnailImage ?? oakPlaceholder}\n                    alt={imageAltText}\n                    $showOakPlaceholder={!thumbnailImage ? true : false}\n                    $borderRadius={\"border-radius-xs\"}\n                  />\n                ) : (\n                  <OakIcon\n                    fill\n                    $height={\"100%\"}\n                    $width={\"100%\"}\n                    iconName={\"audio-clip-small\"}\n                    alt={imageAltText}\n                    $borderRadius={\"border-radius-xs\"}\n                  />\n                )}\n                <OakTimer\n                  timeCode={timeCode}\n                  $position={\"absolute\"}\n                  $bottom={\"space-between-sssx\"}\n                  $right={\"space-between-sssx\"}\n                />\n              </ImageBox>\n\n              <TextBox\n                $width={\"100%\"}\n                $flexDirection={\"column\"}\n                $gap={\"space-between-sssx\"}\n              >\n                <OakHeading\n                  $textOverflow={\"ellipsis\"}\n                  tag=\"h4\"\n                  $font={\"heading-7\"}\n                  $color={\n                    !disabled ? buttonStyles.clipNameTitle : \"text-disabled\"\n                  }\n                >\n                  {clipName}\n                </OakHeading>\n                {learningCycle && (\n                  <OakP\n                    $color={!disabled ? \"text-subdued\" : \"text-disabled\"}\n                    $font={\"body-3\"}\n                    $textOverflow={\"ellipsis\"}\n                    $overflow={\"hidden\"}\n                    $whiteSpace={\"nowrap\"}\n                  >\n                    {learningCycle}\n                  </OakP>\n                )}\n              </TextBox>\n            </>\n            {muxPlayingState === \"played\" && !disabled && (\n              <OakFlex $flexGrow={1}>\n                <OakTagFunctional label=\"Played\" $background={\"bg-neutral\"} />\n              </OakFlex>\n            )}\n          </OakFlex>\n        </StyledInternalButton>\n      </MediaButtonWrapper>\n    </OakLI>\n  );\n};\n\n/**\n *\n * OakMediaClip component adapted from the Internal button component, has 4 different states, standard, playing, played and disabled\n * The following callbacks are available for tracking focus events:\n *\n * timeCode should be provided in seconds as the OakTimer component converts this to hours and minutes format\n *\n * ### Callbacks\n * - `onClick`\n *\n */\n"],"names":["MediaButtonWrapper","styled","StyledButtonWrapper","StyledMediaClipImage","OakImage","placeholderStyles","ImageBox","OakFlex","props","disabled","css","TextBox","StyledInternalButton","InternalButton","positionStyle","sizeStyle","muxPlayingState","parseColor","$hoverTextColor","$hoverBackground","$hoverBorderColor","$defaultBackground","$defaultBorderColor","$defaultTextColor","$disabledBackground","$disabledBorderColor","$disabledTextColor","thumbnailImage","timeCode","clipName","learningCycle","onClick","imageAltText","isAudioClip","element","buttonStyles","defaultBackground","defaultTextColor","hoverBackground","hoverTextColor","clipNameTitle","getButtonStyles","React","default","createElement","OakLI","$mb","$position","$borderRadius","OakBox","className","$height","$top","tabIndex","$width","$background","defaultBorderColor","$color","justifyContent","$pa","$flexDirection","$alignItems","Fragment","$mr","fill","src","oakPlaceholder","alt","$showOakPlaceholder","OakIcon","iconName","OakTimer","$bottom","$right","OakHeading","$textOverflow","tag","$font","OakP","$overflow","$whiteSpace","$flexGrow","OakTagFunctional","label"],"mappings":"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"}