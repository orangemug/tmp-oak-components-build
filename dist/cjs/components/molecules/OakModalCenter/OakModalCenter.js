"use strict";var e=require("react"),a=require("react-dom"),t=require("react-focus-on"),r=require("react-transition-group"),o=require("styled-components"),n=require("../InternalShadowRoundButton/InternalShadowRoundButton.js");require("../../atoms/OakAnchorTarget/OakAnchorTarget.js"),require("../../atoms/OakAspectRatio/OakAspectRatio.js");var i=require("../../atoms/OakBox/OakBox.js");require("../../atoms/OakCloudinaryImage/OakCloudinaryImage.js");var s=require("../../atoms/OakFlex/OakFlex.js");require("../../atoms/OakForm/OakForm.js"),require("../../atoms/OakGlobalStyle/OakGlobalStyle.js"),require("../../atoms/OakGrid/OakGrid.js"),require("../../atoms/OakGridArea/OakGridArea.js"),require("../../atoms/OakHeading/OakHeading.js"),require("../../atoms/OakImage/OakImage.js"),require("../../atoms/OakSpan/OakSpan.js"),require("../../atoms/OakLI/OakLI.js"),require("../../atoms/OakLabel/OakLabel.js"),require("../../atoms/OakMaxWidth/OakMaxWidth.js"),require("../../atoms/OakOL/OakOL.js"),require("../../atoms/OakFieldset/OakFieldset.js"),require("../../atoms/OakP/OakP.js"),require("../../atoms/OakScreenReader/OakScreenReader.js"),require("../../atoms/OakTypography/OakTypography.js"),require("../../atoms/OakUL/OakUL.js"),require("../../atoms/OakSvg/OakSvg.js");var l=require("../../../styles/helpers/parseSpacing.js");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=d(e),c=d(o);const k=c.default(t.FocusOn)`
  ${i.oakBoxCss}
`,m=c.default(i.OakBox)`
  backdrop-filter: blur(3px);
`,p=c.default(s.OakFlex)`
  opacity: ${({$state:e})=>{switch(e){case"entered":case"entering":return"1";default:return"0"}}};
  transition: opacity 0s;
`;exports.OakModalCenter=({children:t,domContainer:o,isOpen:d,onClose:c=(()=>{}),disableBackdropClick:O=!1,disableEscapeKey:g=!1,hideCloseButton:f=!1,modalFlexProps:b,modalInnerFlexProps:$,backdropFlexProps:x,footerSlot:h})=>{const[q,j]=e.useState({top:!1,bottom:!1}),E=e.useRef(null),v=e.useRef(null),y=e.useCallback((()=>{const e=v.current;e&&(e.scrollHeight>e.clientHeight&&(v.current.tabIndex=0),j({top:e.scrollTop>0,bottom:e.scrollHeight>e.clientHeight}))}),[]);e.useLayoutEffect((()=>(y(),v.current?.addEventListener("scroll",y),()=>{v.current?.removeEventListener("scroll",y)})),[d]),e.useEffect((()=>(window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)})));const C="undefined"!=typeof window,I=u.default.createElement(r.Transition,{in:d,nodeRef:E,addEndListener:e=>{E.current?.addEventListener("transitionend",e)},timeout:0,mountOnEnter:!0,unmountOnExit:!0},(e=>u.default.createElement(p,{ref:E,$state:e,$position:"fixed",$inset:"all-spacing-0",$justifyContent:"center",$alignItems:"center",$zIndex:"modal-dialog"},u.default.createElement(m,{$position:"fixed",$inset:"all-spacing-0",$zIndex:"behind",$background:"blackSemiTransparent","data-testid":"backdrop",...x}),u.default.createElement(s.OakFlex,{$alignItems:"center",$justifyContent:"center",$maxWidth:"all-spacing-23",$width:"100%",$pa:"inner-padding-l"},u.default.createElement(k,{onEscapeKey:()=>!g&&c(),onClickOutside:()=>!O&&c(),returnFocus:!0,autoFocus:!0,$width:"100%"},u.default.createElement(s.OakFlex,{$flexDirection:"column",$background:"white",$borderRadius:"border-radius-l",$width:"100%",$position:"relative",role:"alertdialog",style:{maxHeight:`calc(100vh - ${l.parseSpacing("inner-padding-xl5")} - ${l.parseSpacing("inner-padding-xl5")})`},...b},u.default.createElement(i.OakBox,{$minHeight:"inner-padding-xl5",$position:"relative"},!f&&u.default.createElement(i.OakBox,{$position:"absolute",$top:"all-spacing-3",$right:"all-spacing-3"},u.default.createElement(n.InternalShadowRoundButton,{onClick:c,"aria-label":"Close Modal",defaultIconBackground:"transparent",defaultIconColor:"black",defaultTextColor:"transparent",hoverTextColor:"transparent",disabledTextColor:"transparent",hoverIconBackground:"black",hoverIconColor:"white",disabledIconBackground:"transparent",iconBackgroundSize:"all-spacing-7",iconSize:"all-spacing-7",iconName:"cross","data-testid":"close-button"}))),u.default.createElement("div",{style:{display:"contents"},"data-autofocus-inside":!0},u.default.createElement(s.OakFlex,{ref:v,"data-testid":"modal-main-content",$overflow:"auto",$flexDirection:"column",$ph:"inner-padding-xl5",$bt:q.top?"border-solid-s":"border-solid-none",$bb:q.bottom?"border-solid-s":"border-solid-none",$borderColor:"border-neutral-lighter",...$},t),h)))))));return o&&C?a.createPortal(I,o):I};
//# sourceMappingURL=OakModalCenter.js.map
