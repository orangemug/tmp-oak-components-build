{"version":3,"file":"OakCopyLinkButton.js","sources":["../../../../../src/components/molecules/OakCopyLinkButton/OakCopyLinkButton.tsx"],"sourcesContent":["import React, { useState } from \"react\";\n\nimport { OakSmallSecondaryButton } from \"@/components/molecules/OakSmallSecondaryButton\";\nimport { OakBox } from \"@/components/atoms\";\n\ntype OakCopyLinkButtonProps = {\n  /**\n   * Href of the link that should be copied\n   */\n  href?: string;\n};\n\n/**\n * Display copy link button\n */\nexport const OakCopyLinkButton = ({ href }: OakCopyLinkButtonProps) => {\n  const copyLinkMessage = \"Copy link\";\n  const linkCopiedMessage = \"Link copied\";\n\n  const [label, setLabel] = useState(copyLinkMessage);\n  const [active, setActive] = useState(true);\n  const [announce, setAnnounce] = useState(\"\");\n\n  const copyLink = () => {\n    if (navigator.clipboard) {\n      const urlToCopy = href || window.location.href;\n      navigator.clipboard.writeText(urlToCopy);\n\n      setLabel(linkCopiedMessage);\n      setAnnounce(linkCopiedMessage);\n      setActive(false);\n\n      const resetCopyLinkButtonTimer = 4000;\n\n      setTimeout(() => {\n        setAnnounce(\"\"); // used for aria-live announcement\n        setActive(true);\n        setLabel(copyLinkMessage);\n      }, resetCopyLinkButtonTimer);\n    } else {\n      alert(\"Please update your browser to support this feature\");\n    }\n  };\n\n  return (\n    <>\n      <OakBox $display={[\"none\", \"block\"]}>\n        <OakSmallSecondaryButton\n          iconName={active ? \"copy\" : \"tick\"}\n          iconAriaHidden={true}\n          isTrailingIcon\n          onClick={copyLink}\n          data-testid={\"copy-link-desktop-button\"}\n        >\n          {label}\n        </OakSmallSecondaryButton>\n      </OakBox>\n      <OakBox $display={[\"block\", \"none\"]}>\n        <OakSmallSecondaryButton onClick={copyLink}>\n          {label}\n        </OakSmallSecondaryButton>\n      </OakBox>\n      {/* Live region for aria-live announcements */}\n      {announce && (\n        <div\n          aria-relevant=\"all\"\n          aria-live=\"polite\"\n          style={{ position: \"absolute\", left: \"-9999px\" }}\n          data-testid=\"announce\"\n        >\n          {announce}\n        </div>\n      )}\n    </>\n  );\n};\n"],"names":["href","copyLinkMessage","linkCopiedMessage","label","setLabel","useState","active","setActive","announce","setAnnounce","copyLink","navigator","clipboard","urlToCopy","window","location","writeText","setTimeout","alert","React","createElement","default","Fragment","OakBox","$display","OakSmallSecondaryButton","iconName","iconAriaHidden","isTrailingIcon","onClick","style","position","left"],"mappings":"6vCAeiC,EAAGA,WAClC,MAAMC,EAAkB,YAClBC,EAAoB,eAEnBC,EAAOC,GAAYC,EAAQA,SAACJ,IAC5BK,EAAQC,GAAaF,EAAQA,UAAC,IAC9BG,EAAUC,GAAeJ,EAAQA,SAAC,IAEnCK,EAAW,KACf,GAAIC,UAAUC,UAAW,CACvB,MAAMC,EAAYb,GAAQc,OAAOC,SAASf,KAC1CW,UAAUC,UAAUI,UAAUH,GAE9BT,EAASF,GACTO,EAAYP,GACZK,GAAU,GAIVU,YAAW,KACTR,EAAY,IACZF,GAAU,GACVH,EAASH,EAAgB,GALM,IAOlC,MACCiB,MAAM,qDACP,EAGH,OACEC,UAAAC,cAAAD,EAAAE,QAAAC,SAAA,KACEH,EAAAE,QAAAD,cAACG,SAAiB,CAAAC,SAAA,CAAC,OAAQ,UACzBL,EAAAE,QAAAD,cAACK,0BAAuB,CACtBC,SAAUpB,EAAS,OAAS,OAC5BqB,gBAAgB,EAChBC,gBAAc,EACdC,QAASnB,EAAQ,cACJ,4BAEZP,IAGLgB,EAAAE,QAAAD,cAACG,SAAiB,CAAAC,SAAA,CAAC,QAAS,SAC1BL,EAACE,QAAAD,cAAAK,2BAAwBI,QAASnB,GAC/BP,IAIJK,GACCW,EAAAA,QAAAC,cAAA,MAAA,CAAA,gBACgB,MAAK,YACT,SACVU,MAAO,CAAEC,SAAU,WAAYC,KAAM,WACzB,cAAA,YAEXxB,GAIP"}