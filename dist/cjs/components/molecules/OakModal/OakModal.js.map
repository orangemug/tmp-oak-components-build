{"version":3,"file":"OakModal.js","sources":["../../../../../src/components/molecules/OakModal/OakModal.tsx"],"sourcesContent":["import React, { HTMLAttributes, ReactNode, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport { InternalShadowRoundButton } from \"@/components/molecules/InternalShadowRoundButton\";\nimport { OakFlex, OakImage } from \"@/components/atoms\";\nimport useIsScrolled from \"@/hooks/useIsScrolled\";\nimport useMounted from \"@/hooks/useMounted\";\nimport InternalModalTransition from \"@/components/molecules/InternalModalTransition/InternalModalTransition\";\n\nexport type OakModalProps = {\n  /**\n   * The content of the modal.\n   * Use with `<OakModalBody>` for best results.\n   */\n  children: ReactNode;\n  /**\n   * Slot for the footer of the modal.\n   * Use with `<OakModalFooter>` for best results.\n   */\n  footerSlot?: ReactNode;\n  /**\n   * Indicates whether the modal is open or closed\n   */\n  isOpen: boolean;\n  /**\n   * Called when the modal is closed\n   */\n  onClose: () => void;\n  /**\n   * The DOM container to render the modal portal into.\n   *\n   * @default document.body\n   */\n  domContainer?: Element;\n  /**\n   * Optional z-index override.\n   *\n   * Defaults to token: `modal-dialog`\n   *\n   * ðŸš¨ This prop is intended for use by consumers that do not use\n   * the internal system of z-index tokens.\n   *\n   * NB *The modal is rendered inside a portal so it will not respect the stacking context of its parent component*.\n   */\n  zIndex?: number;\n  /**\n   * Whether the modal should be anchored to the left side of the screen.\n   */\n  isLeftHandSide?: boolean;\n} & Pick<\n  HTMLAttributes<Element>,\n  \"aria-label\" | \"aria-description\" | \"aria-labelledby\" | \"aria-describedby\"\n>;\n\nconst logoSrc = `https://${process.env.NEXT_PUBLIC_OAK_ASSETS_HOST}/${process.env.NEXT_PUBLIC_OAK_ASSETS_PATH}/logo-mark.svg`;\n\n/**\n * Modal dialog with trapped focus and a close button.\n */\nexport const OakModal = ({\n  children,\n  footerSlot,\n  domContainer,\n  isOpen,\n  onClose,\n  zIndex,\n  isLeftHandSide = true,\n  ...rest\n}: OakModalProps) => {\n  const transitionRef = useRef<HTMLDivElement>(null);\n\n  const { isScrolled, ObserveScroll } = useIsScrolled();\n\n  // `createPortal` is not supported in SSR so we can only render when mounted on the client\n  const isMounted = useMounted();\n\n  if (!isMounted) {\n    return null;\n  }\n\n  const finalZIndex = typeof zIndex === \"number\" ? zIndex : \"modal-dialog\";\n\n  return createPortal(\n    <InternalModalTransition\n      isOpen={isOpen}\n      transitionRef={transitionRef}\n      onClose={onClose}\n      finalZIndex={finalZIndex}\n      isLeftHandSide={isLeftHandSide}\n      {...rest}\n    >\n      <OakFlex\n        $ma=\"space-between-s\"\n        $justifyContent=\"space-between\"\n        $alignItems=\"center\"\n      >\n        <OakImage\n          src={logoSrc}\n          $height=\"all-spacing-8\"\n          $width=\"all-spacing-7\"\n          alt=\"\"\n        />\n        <InternalShadowRoundButton\n          onClick={onClose}\n          aria-label=\"Close\"\n          defaultIconBackground=\"transparent\"\n          defaultIconColor=\"black\"\n          defaultTextColor=\"transparent\"\n          hoverTextColor=\"transparent\"\n          disabledTextColor=\"transparent\"\n          hoverIconBackground=\"black\"\n          hoverIconColor=\"white\"\n          disabledIconBackground=\"transparent\"\n          iconBackgroundSize=\"all-spacing-6\"\n          iconSize=\"all-spacing-6\"\n          iconName=\"cross\"\n        />\n      </OakFlex>\n      <div style={{ display: \"contents\" }} data-autofocus-inside>\n        <OakFlex\n          $flexGrow={1}\n          $flexDirection=\"column\"\n          $overflow=\"auto\"\n          $bt=\"border-solid-s\"\n          $borderColor={isScrolled ? \"border-neutral-lighter\" : \"transparent\"}\n        >\n          <ObserveScroll>{children}</ObserveScroll>\n        </OakFlex>\n        {footerSlot}\n      </div>\n    </InternalModalTransition>,\n    domContainer ?? document.body,\n  );\n};\n"],"names":["logoSrc","process","env","NEXT_PUBLIC_OAK_ASSETS_HOST","NEXT_PUBLIC_OAK_ASSETS_PATH","children","footerSlot","domContainer","isOpen","onClose","zIndex","isLeftHandSide","rest","transitionRef","useRef","isScrolled","ObserveScroll","useIsScrolled","useMounted","finalZIndex","createPortal","React","createElement","InternalModalTransition","OakFlex","$ma","$justifyContent","OakImage","src","$height","$width","alt","default","InternalShadowRoundButton","onClick","defaultIconBackground","defaultIconColor","defaultTextColor","hoverTextColor","disabledTextColor","hoverIconBackground","hoverIconColor","disabledIconBackground","iconBackgroundSize","iconSize","iconName","style","display","$flexGrow","$overflow","$bt","$borderColor","document","body"],"mappings":"k6CAsDA,MAAMA,EAAU,WAAWC,QAAQC,IAAIC,+BAA+BF,QAAQC,IAAIE,6DAK1D,EACtBC,WACAC,aACAC,eACAC,SACAC,UACAC,SACAC,kBAAiB,KACdC,MAEH,MAAMC,EAAgBC,SAAuB,OAEvCC,WAAEA,EAAUC,cAAEA,GAAkBC,IAKtC,IAFkBC,IAGhB,OAAO,KAGT,MAAMC,EAAgC,iBAAXT,EAAsBA,EAAS,eAE1D,OAAOU,EAAAA,aACLC,EAAAA,QAAAC,cAACC,EAAuB,CACtBf,OAAQA,EACRK,cAAeA,EACfJ,QAASA,EACTU,YAAaA,EACbR,eAAgBA,KACZC,GAEJS,UAAAC,cAACE,EAAOA,QACF,CAAAC,IAAA,kBACYC,gBAAA,4BACJ,UAEZL,EAAAA,QAAAC,cAACK,WAAQ,CACPC,IAAK5B,EAAO6B,QACJ,gBAAeC,OAChB,gBACPC,IAAI,KAENV,EAACW,QAAAV,cAAAW,EAAyBA,0BACxB,CAAAC,QAASzB,eACE,QACX0B,sBAAsB,cACtBC,iBAAiB,QACjBC,iBAAiB,cACjBC,eAAe,cACfC,kBAAkB,cAClBC,oBAAoB,QACpBC,eAAe,QACfC,uBAAuB,cACvBC,mBAAmB,gBACnBC,SAAS,gBACTC,SAAS,WAGbxB,UAAAC,cAAA,MAAA,CAAKwB,MAAO,CAAEC,QAAS,YAAY,yBAAA,GACjC1B,EAAAW,QAAAV,cAACE,EAAOA,QACK,CAAAwB,UAAA,iBACI,SAAQC,UACb,OACNC,IAAA,iBACUC,aAAApC,EAAa,yBAA2B,eAEtDM,EAAAA,QAAAC,cAACN,EAAa,KAAEX,IAEjBC,IAGLC,GAAgB6C,SAASC,KAC1B"}