{"version":3,"file":"mockIntersectionObserver.js","sources":["../../../src/test-helpers/mockIntersectionObserver.ts"],"sourcesContent":["/**\n * Installs a mock of IntersectionObserver when it is not present in the environment\n *\n * This is a global mock, so it will affect all tests that run after it is imported.\n */\nexport function installMockIntersectionObserver() {\n  global.IntersectionObserver =\n    global.IntersectionObserver ??\n    class MockIntersectionObserver implements IntersectionObserver {\n      private elements: Set<Element> = new Set();\n\n      get root(): Element {\n        throw new Error(\"Attribute not implemented.\");\n      }\n      get rootMargin(): string {\n        throw new Error(\"Attribute not implemented.\");\n      }\n      get thresholds(): number[] {\n        throw new Error(\"Attribute not implemented.\");\n      }\n      takeRecords(): IntersectionObserverEntry[] {\n        throw new Error(\"Method not implemented.\");\n      }\n      observe(element: Element) {\n        this.elements.add(element);\n        console.log(`Observing element: ${this.describeElement(element)}`);\n      }\n      unobserve(element: Element) {\n        this.elements.delete(element);\n        console.log(`Stopped observing: ${this.describeElement(element)}}`);\n      }\n      disconnect() {\n        this.elements.clear();\n        console.log(\"Disconnected all observed elements.\");\n      }\n      private describeElement(element: Element): string {\n        let description = element.tagName.toLowerCase();\n        if (element.id) {\n          description += \"#\" + element.id;\n        }\n        if (element.className) {\n          description += \".\" + element.className.replace(/\\s+/g, \".\");\n        }\n        return description;\n      }\n    };\n}\n"],"names":["installMockIntersectionObserver","global","IntersectionObserver","elements","Set","root","Error","rootMargin","thresholds","takeRecords","observe","element","this","add","console","log","describeElement","unobserve","delete","disconnect","clear","description","tagName","toLowerCase","id","className","replace"],"mappings":"SAKgBA,IACdC,OAAOC,qBACLD,OAAOC,sBACP,MACUC,SAAyB,IAAIC,IAErC,QAAIC,GACF,MAAM,IAAIC,MAAM,6BACjB,CACD,cAAIC,GACF,MAAM,IAAID,MAAM,6BACjB,CACD,cAAIE,GACF,MAAM,IAAIF,MAAM,6BACjB,CACD,WAAAG,GACE,MAAM,IAAIH,MAAM,0BACjB,CACD,OAAAI,CAAQC,GACNC,KAAKT,SAASU,IAAIF,GAClBG,QAAQC,IAAI,sBAAsBH,KAAKI,gBAAgBL,KACxD,CACD,SAAAM,CAAUN,GACRC,KAAKT,SAASe,OAAOP,GACrBG,QAAQC,IAAI,sBAAsBH,KAAKI,gBAAgBL,MACxD,CACD,UAAAQ,GACEP,KAAKT,SAASiB,QACdN,QAAQC,IAAI,sCACb,CACO,eAAAC,CAAgBL,GACtB,IAAIU,EAAcV,EAAQW,QAAQC,cAOlC,OANIZ,EAAQa,KACVH,GAAe,IAAMV,EAAQa,IAE3Bb,EAAQc,YACVJ,GAAe,IAAMV,EAAQc,UAAUC,QAAQ,OAAQ,MAElDL,CACR,EAEP"}