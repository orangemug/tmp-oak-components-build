{"version":3,"file":"OakPagination.js","sources":["../../../../../../src/components/organisms/shared/OakPagination/OakPagination.tsx"],"sourcesContent":["import React, { RefObject } from \"react\";\nimport styled, { css } from \"styled-components\";\n\nimport { generatePageNumbers } from \"./utils\";\n\nimport { OakFlex, OakIcon, OakLI, OakUL } from \"@/components/atoms\";\nimport { InternalButton } from \"@/components/atoms/InternalButton\";\nimport { parseColorFilter } from \"@/styles/helpers/parseColorFilter\";\nimport { OakLink } from \"@/components/molecules\";\nimport { typographyStyle } from \"@/styles/utils/typographyStyle\";\n\nexport type OakPaginationProps = {\n  currentPage: number;\n  totalPages: number;\n  firstItemRef?: RefObject<HTMLAnchorElement> | null;\n  nextHref?: string;\n  prevHref?: string;\n  paginationHref: string;\n  pageName: string;\n  onPageChange: (page: number) => void;\n};\n\ntype OakPageNumberProps = {\n  currentPage: number;\n  pageNumber: number;\n  totalPages?: number;\n  firstItemRef?: RefObject<HTMLAnchorElement> | null;\n  href: string;\n  onClick?: (event: React.MouseEvent) => void;\n  pageName: string;\n};\n\nconst StyledChevronButton = styled(OakLink)<{ disabledColor: string }>`\n  display: inline-block;\n  ${(props) => css`\n    &:disabled {\n      color: ${props.disabledColor};\n      cursor: pointer;\n    }\n  `}\n`;\n\nconst StyledIcon = styled(OakIcon)<{ disabled: boolean }>`\n  ${(props) => {\n    if (props.disabled) {\n      return css`\n        filter: ${parseColorFilter(\"grey50\")};\n      `;\n    }\n  }}\n`;\n\nconst StyledNumberButton = styled(OakLink)<{ selected: boolean }>`\n  height: 30px;\n  width: 30px;\n  border-radius: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-decoration: none;\n  ${typographyStyle}\n  color: black;\n\n  ${(props) => css`\n    background-color: ${props.selected ? \"black\" : \"white\"};\n  `};\n\n  ${(props) =>\n    props.selected &&\n    css`\n      color: white;\n      &:visited {\n        color: white;\n      }\n    `}\n\n  &:hover {\n    text-decoration: underline;\n    ${(props) =>\n      props.selected &&\n      css`\n        color: white;\n        @media (hover: hover) {\n    &:hover:not(:disabled) {\n      color: white;\n    }\n      `}\n  }\n`;\n\nconst StyledEllipsis = styled(InternalButton)`\n  &:disabled {\n    cursor: pointer;\n  }\n`;\n\nconst OakPageNumber = ({\n  currentPage,\n  pageNumber,\n  onClick,\n  href,\n  pageName,\n}: OakPageNumberProps) => {\n  const isActive = currentPage === pageNumber;\n  return (\n    <StyledNumberButton\n      data-testid=\"page-number-component\"\n      aria-label={`${pageName} page ${pageNumber}`}\n      aria-current={isActive ? \"page\" : false}\n      $font={\"heading-7\"}\n      onClick={onClick}\n      selected={isActive}\n      href={href}\n    >\n      {pageNumber}\n    </StyledNumberButton>\n  );\n};\n\nconst OakEllipsis = () => {\n  return (\n    <StyledEllipsis\n      $color=\"text-primary\"\n      $font={\"heading-7\"}\n      $background=\"white\"\n      aria-label=\"Hidden page numbers\"\n      disabled\n    >\n      ...\n    </StyledEllipsis>\n  );\n};\n\nexport const OakPagination = ({\n  totalPages,\n  nextHref,\n  prevHref,\n  paginationHref,\n  pageName,\n  onPageChange,\n  currentPage,\n}: OakPaginationProps) => {\n  const pages = generatePageNumbers(currentPage, totalPages);\n\n  const isFirstPage = currentPage <= 1;\n  const isLastPage = currentPage >= totalPages;\n\n  const handleNumberClick = (num: number, event: React.MouseEvent) => {\n    event.preventDefault();\n    onPageChange(num);\n  };\n\n  const handleChevronClick = (\n    direction: \"backwards\" | \"forwards\",\n    event: React.UIEvent,\n  ) => {\n    event.preventDefault();\n    const newPage = currentPage + (direction === \"backwards\" ? -1 : 1);\n    onPageChange(newPage);\n  };\n\n  if (currentPage === 1 && totalPages < 2) {\n    return null;\n  }\n  return (\n    <nav aria-label=\"pagination\" data-testid=\"pagination\">\n      <OakFlex\n        $alignItems={\"center\"}\n        $justifyContent={\"center\"}\n        $width={\"100%\"}\n        $gap={[\"space-between-ssx\", \"space-between-s\", \"space-between-s\"]}\n      >\n        <StyledChevronButton\n          element={isFirstPage ? \"button\" : \"a\"}\n          rel=\"prev\"\n          href={prevHref}\n          data-testid=\"backwards-button\"\n          onClick={(\n            e: React.MouseEvent<HTMLButtonElement | HTMLAnchorElement>,\n          ) => {\n            e.preventDefault();\n            handleChevronClick(\"backwards\", e);\n          }}\n          onKeyDown={(\n            e: React.KeyboardEvent<HTMLButtonElement | HTMLAnchorElement>,\n          ) => {\n            if (e.key === \"Enter\") {\n              handleChevronClick(\"backwards\", e);\n            }\n          }}\n          tabIndex={isFirstPage ? -1 : 0}\n          aria-disabled={isFirstPage}\n          disabled={isFirstPage}\n          aria-label={isFirstPage ? \"No previous pages\" : \"Go to previous page\"}\n        >\n          <StyledIcon disabled={isFirstPage} iconName=\"chevron-left\" />\n        </StyledChevronButton>\n        <OakUL $reset $display={\"flex\"}>\n          {pages.map((page, i) => {\n            if (typeof page === \"number\") {\n              return (\n                <OakLI\n                  key={`${page} ${i}`}\n                  $mh={[\n                    \"space-between-sssx\",\n                    \"space-between-ssx\",\n                    \"space-between-ssx\",\n                  ]}\n                >\n                  <OakPageNumber\n                    pageName={pageName}\n                    key={page}\n                    pageNumber={page + 1}\n                    currentPage={currentPage}\n                    href={`${paginationHref}?page=${page + 1}`}\n                    onClick={(e: React.MouseEvent) =>\n                      handleNumberClick(page + 1, e)\n                    }\n                  />\n                </OakLI>\n              );\n            } else {\n              return (\n                <OakLI\n                  $mh={[\n                    \"space-between-sssx\",\n                    \"space-between-ssx\",\n                    \"space-between-ssx\",\n                  ]}\n                  key={`${page} ${i}`}\n                >\n                  <OakFlex $height={\"100%\"} $alignSelf={\"center\"}>\n                    <OakEllipsis />\n                  </OakFlex>\n                </OakLI>\n              );\n            }\n          })}\n        </OakUL>\n        <StyledChevronButton\n          element={isLastPage ? \"button\" : \"a\"}\n          rel=\"next\"\n          tabIndex={isLastPage ? -1 : 0}\n          data-testid=\"forwards-button\"\n          href={nextHref}\n          onClick={(\n            e: React.MouseEvent<HTMLButtonElement | HTMLAnchorElement>,\n          ) => {\n            handleChevronClick(\"forwards\", e);\n          }}\n          onKeyDown={(\n            e: React.KeyboardEvent<HTMLButtonElement | HTMLAnchorElement>,\n          ) => {\n            if (e.key === \"Enter\") {\n              handleChevronClick(\"forwards\", e);\n            }\n          }}\n          aria-disabled={isLastPage}\n          disabled={isLastPage}\n          aria-label={isLastPage ? \"No further pages\" : \"Go to next page\"}\n        >\n          <StyledIcon disabled={isLastPage} iconName=\"chevron-right\" />\n        </StyledChevronButton>\n      </OakFlex>\n    </nav>\n  );\n};\n\n/**\n *\n * Add the description of the component here and it will appear on the story for the component\n * The following callbacks are available for tracking focus events:\n *\n * Pagination component for navigating through pages\n *\n * @param router - Next.js router object\n * @param currentPage - Current page number\n * @param totalPages - Total number of pages\n * @param nextHref - URL for the next page\n * @param prevHref - URL for the previous page\n * @param paginationHref - Base URL for the pagination\n * @param pageName - Name of the page\n * @param onPageChange - Callback function for iterating through pages\n *\n */\n"],"names":["StyledChevronButton","styled","OakLink","props","css","disabledColor","StyledIcon","OakIcon","disabled","parseColorFilter","StyledNumberButton","typographyStyle","selected","StyledEllipsis","InternalButton","OakPageNumber","currentPage","pageNumber","onClick","href","pageName","isActive","React","createElement","OakEllipsis","$color","$font","$background","OakPagination","totalPages","nextHref","prevHref","paginationHref","onPageChange","pages","generatePageNumbers","isFirstPage","isLastPage","handleChevronClick","direction","event","preventDefault","OakFlex","$alignItems","$justifyContent","$width","$gap","element","rel","e","onKeyDown","key","tabIndex","iconName","OakUL","$reset","$display","map","page","i","OakLI","$mh","handleNumberClick","num","$height","$alignSelf"],"mappings":"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"}