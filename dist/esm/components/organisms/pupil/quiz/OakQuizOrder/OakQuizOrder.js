import e,{useState as a}from"react";import{useSensors as t,useSensor as o,MouseSensor as r,TouchSensor as i,KeyboardSensor as n,closestCenter as s,DragOverlay as l}from"@dnd-kit/core";import{sortableKeyboardCoordinates as m,SortableContext as d,verticalListSortingStrategy as k,arrayMove as c,useSortable as p}from"@dnd-kit/sortable";import{CSS as O}from"@dnd-kit/utilities";import{createPortal as u}from"react-dom";import"../../../../atoms/OakAnchorTarget/OakAnchorTarget.js";import"../../../../atoms/OakAspectRatio/OakAspectRatio.js";import"../../../../atoms/OakBox/OakBox.js";import"../../../../atoms/OakCloudinaryImage/OakCloudinaryImage.js";import{OakFlex as g}from"../../../../atoms/OakFlex/OakFlex.js";import"../../../../atoms/OakForm/OakForm.js";import"../../../../atoms/OakGlobalStyle/OakGlobalStyle.js";import"../../../../atoms/OakGrid/OakGrid.js";import"../../../../atoms/OakGridArea/OakGridArea.js";import"../../../../atoms/OakHeading/OakHeading.js";import"../../../../atoms/OakImage/OakImage.js";import"../../../../atoms/OakSpan/OakSpan.js";import"../../../../atoms/OakLI/OakLI.js";import"../../../../atoms/OakLabel/OakLabel.js";import"../../../../atoms/OakMaxWidth/OakMaxWidth.js";import"../../../../atoms/OakOL/OakOL.js";import"../../../../atoms/OakFieldset/OakFieldset.js";import"../../../../atoms/OakP/OakP.js";import"../../../../atoms/OakScreenReader/OakScreenReader.js";import"styled-components";import"../../../../atoms/OakTypography/OakTypography.js";import"../../../../atoms/OakUL/OakUL.js";import"../../../../atoms/OakSvg/OakSvg.js";import"../../../../molecules/OakAccordion/OakAccordion.js";import"../../../../molecules/OakBackLink/OakBackLink.js";import"../../../../molecules/OakButtonAsRadioGroup/OakButtonAsRadioGroup.js";import"../../../../atoms/InternalCardWithBackgroundElement/InternalCardWithBackgroundElement.js";import"../../../../atoms/InternalStyledSvg/InternalStyledSvg.js";import"../../../../atoms/InternalCheckBox/InternalCheckBox.js";import"../../../../atoms/InternalCheckBoxLabel/InternalCheckBoxLabel.js";import"../../../../atoms/InternalCheckBoxWrapper/InternalCheckBoxWrapper.js";import"../../../../molecules/OakCollapsibleContent/OakCollapsibleContent.js";import{OakDragAndDropInstructions as j}from"../../../../molecules/OakDragAndDropInstructions/OakDragAndDropInstructions.js";import{OakDraggable as b}from"../../../../molecules/OakDraggable/OakDraggable.js";import{OakDroppable as I}from"../../../../molecules/OakDroppable/OakDroppable.js";import"../../../../molecules/OakHandDrawnFocusUnderline/OakHandDrawnFocusUnderline.js";import"../../../../molecules/OakHandDrawnHR/OakHandDrawnHR.js";import"../../../../molecules/InternalShadowRoundButton/InternalShadowRoundButton.js";import"../../../../molecules/OakLink/OakLink.js";import"../../../../molecules/OakLoadingSpinner/OakLoadingSpinner.js";import"../../../../molecules/OakModal/OakModal.js";import"../../../../molecules/OakModalCenter/OakModalCenter.js";import"../../../../molecules/OakOutlineAccordion/OakOutlineAccordion.js";import"../../../../molecules/InternalShadowRectButton/InternalShadowRectButton.js";import"../../../../molecules/OakPromoTag/OakPromoTag.js";import"../../../../molecules/OakRadioButton/OakRadioButton.js";import"../../../../molecules/OakRadioGroup/OakRadioGroup.js";import"../../../../molecules/OakRadioTile/OakRadioTile.js";import"../../../../molecules/OakSecondaryLink/OakSecondaryLink.js";import"../../../../molecules/OakFilterDrawer/OakFilterDrawer.js";import"../../../../molecules/OakTextInput/OakTextInput.js";import"../../../../atoms/InternalTooltip/InternalTooltip.js";import"../../../../molecules/OakTimer/OakTimer.js";import{OakCodeRenderer as f}from"../../../../molecules/OakCodeRenderer/OakCodeRenderer.js";import{InternalDndContext as h}from"../../../../atoms/InternalDndContext/InternalDndContext.js";import{usePrefersReducedMotion as D}from"../../../../../animation/usePrefersReducedMotion.js";const S=({id:a,label:t,isHighlighted:o})=>{const{attributes:r,listeners:i,setNodeRef:n,transform:s,transition:l,isOver:m,isDragging:d}=p({id:a}),k={transform:O.Transform.toString(s),transition:l};return e.createElement(I,{isOver:m,isHighlighted:o},e.createElement(b,{ref:n,style:k,isDisabled:d,...r,...i,"aria-describedby":void 0,"aria-roledescription":"sortable item","aria-pressed":void 0,"aria-selected":!!r["aria-pressed"],role:"option"},e.createElement(f,{string:t})))},x=({initialItems:p,onChange:O,isHighlighted:I})=>{const[x,R]=a(p),[B,y]=a(null),v=x.find((e=>e.id===B)),L=t(o(r),o(i),o(n,{coordinateGetter:m,scrollBehavior:D()?"instant":"smooth"}));return e.createElement(e.Fragment,null,e.createElement(j,{$mb:"space-between-m2"}),e.createElement(h,{sensors:L,collisionDetection:s,onDragEnd:function(e){const{active:a,over:t}=e;a.id!==t?.id&&R((e=>{const o=e.findIndex((e=>e.id===a.id)),r=e.findIndex((e=>e.id===t?.id)),i=c(e,o,r);return O?.(i),i}));y(null)},onDragStart:function(e){const{active:a}=e;y(a.id.toString())},accessibility:{announcements:C(x)}},e.createElement(d,{items:x,strategy:k},e.createElement(g,{$gap:"space-between-s",$flexDirection:"column",role:"listbox","aria-label":"Sortable items"},x.map((a=>e.createElement(S,{key:a.id,...a,isHighlighted:I})))),u(e.createElement(l,null,v&&e.createElement(b,{isDragging:!0},e.createElement(f,{string:v.label}))),document.body))))};function C(e){const a=a=>e.findIndex((e=>e.id===a))+1,t=a=>e.find((e=>e.id===a))?.label;return{onDragStart(){},onDragOver({active:o,over:r}){if(r)return`Sortable item ${t(o.id)} is in position ${a(r.id)} of ${e.length}`},onDragEnd({active:o,over:r}){if(r)return`Sortable item ${t(o.id)} was dropped into position ${a(r.id)} of ${e.length}`},onDragCancel:({active:e})=>`Dragging was cancelled. Sortable item ${t(e.id)} was dropped.`}}export{x as OakQuizOrder};
//# sourceMappingURL=OakQuizOrder.js.map
