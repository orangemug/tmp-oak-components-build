{"version":3,"file":"InternalDroppableHoldingPen.js","sources":["../../../../../../../src/components/organisms/pupil/quiz/InternalDroppableHoldingPen/InternalDroppableHoldingPen.tsx"],"sourcesContent":["import React, {\n  ComponentPropsWithRef,\n  ComponentPropsWithoutRef,\n  FC,\n  forwardRef,\n  useLayoutEffect,\n  useState,\n} from \"react\";\nimport styled from \"styled-components\";\n\nimport { OakBox, OakFlex } from \"@/components/atoms\";\nimport { parseColor } from \"@/styles/helpers/parseColor\";\n\nconst StyledOakBox = styled(OakBox)`\n  background-color: ${parseColor(\"grey20\")};\n  background-color: color-mix(in lch, ${parseColor(\"black\")} 5%, transparent);\n\n  &[data-over=\"true\"] {\n    background-color: ${parseColor(\"white\")};\n    background-color: color-mix(\n      in lch,\n      ${parseColor(\"white\")} 60%,\n      transparent\n    );\n  }\n`;\n\ntype InternalDroppableHoldingPenProps = {\n  /**\n   * Indicates whether a draggable is currently being dragged over the droppable\n   */\n  isOver?: boolean;\n};\n\n/**\n * An internal holding pen for multiple draggable items\n *\n * Has no intrinsic drop functionally.\n * It is intended to be used with `useDroppable` from `@dnd-kit/core`\n */\nexport const InternalDroppableHoldingPen: FC<\n  ComponentPropsWithRef<typeof OakFlex>\n> = forwardRef<\n  HTMLDivElement,\n  InternalDroppableHoldingPenProps & ComponentPropsWithoutRef<typeof OakFlex>\n>(({ isOver, children, ...props }, ref) => {\n  const [domContent, setContentBox] = useState<HTMLDivElement | null>(null);\n  const [minHeight, setMinHeight] = useState<number>(0);\n\n  useLayoutEffect(() => {\n    if (!domContent) {\n      return;\n    }\n\n    // Prevents the holding area from shrinking when an item is removed\n    // avoiding layout shift\n    const observer = new ResizeObserver((entries) => {\n      for (const entry of entries) {\n        setMinHeight((currentHeight) =>\n          Math.max(entry.borderBoxSize[0]?.blockSize ?? 0, currentHeight),\n        );\n      }\n    });\n\n    observer.observe(domContent);\n\n    // Reset min height when the window is resized so that the holding pen can shrink\n    function resetMinHeight() {\n      setMinHeight(0);\n    }\n    window.addEventListener(\"resize\", resetMinHeight);\n\n    return () => {\n      observer.disconnect();\n      window.removeEventListener(\"resize\", resetMinHeight);\n    };\n  }, [domContent]);\n\n  return (\n    <StyledOakBox\n      ref={ref}\n      $mb=\"space-between-m2\"\n      $borderRadius=\"border-radius-l\"\n      data-over={isOver}\n      style={{ minHeight: minHeight === 0 ? \"auto\" : minHeight }}\n      {...props}\n    >\n      <OakFlex\n        $alignItems=\"flex-start\"\n        $minHeight=\"all-spacing-13\"\n        $pa=\"inner-padding-s\"\n        $gap=\"space-between-xs\"\n        $flexWrap=\"wrap\"\n        ref={setContentBox}\n      >\n        {children}\n      </OakFlex>\n    </StyledOakBox>\n  );\n});\n"],"names":["StyledOakBox","styled","OakBox","parseColor","InternalDroppableHoldingPen","forwardRef","isOver","children","props","ref","domContent","setContentBox","useState","minHeight","setMinHeight","useLayoutEffect","observer","ResizeObserver","entries","entry","currentHeight","Math","max","borderBoxSize","blockSize","resetMinHeight","observe","window","addEventListener","disconnect","removeEventListener","React","createElement","$mb","$borderRadius","style","OakFlex","$minHeight","$pa","$flexWrap"],"mappings":"8xCAaA,MAAMA,EAAeC,EAAOC,EAAO;sBACbC,EAAW;wCACOA,EAAW;;;wBAG3BA,EAAW;;;QAG3BA,EAAW;;;;EAmBNC,EAETC,GAGF,EAAGC,SAAQC,cAAaC,GAASC,KACjC,MAAOC,EAAYC,GAAiBC,EAAgC,OAC7DC,EAAWC,GAAgBF,EAAiB,GA+BnD,OA7BAG,GAAgB,KACd,IAAKL,EACH,OAKF,MAAMM,EAAW,IAAIC,gBAAgBC,IACnC,IAAK,MAAMC,KAASD,EAClBJ,GAAcM,GACZC,KAAKC,IAAIH,EAAMI,cAAc,IAAIC,WAAa,EAAGJ,IAEpD,IAMH,SAASK,IACPX,EAAa,EACd,CAGD,OARAE,EAASU,QAAQhB,GAMjBiB,OAAOC,iBAAiB,SAAUH,GAE3B,KACLT,EAASa,aACTF,OAAOG,oBAAoB,SAAUL,EAAe,CACrD,GACA,CAACf,IAGFqB,EAAAC,cAAChC,EAAY,CACXS,IAAKA,EACDwB,IAAA,mBACUC,cAAA,kBACH,YAAA5B,EACX6B,MAAO,CAAEtB,UAAyB,IAAdA,EAAkB,OAASA,MAC3CL,GAEJuB,EAACC,cAAAI,eACa,aAAYC,WACb,iBACPC,IAAA,uBACC,mBAAkBC,UACb,OACV9B,IAAKE,GAEJJ,GAGL"}