{"version":3,"file":"OakSearchFilterCheckBox.js","sources":["../../../../../../src/components/organisms/teacher/OakSearchFilterCheckBox/OakSearchFilterCheckBox.tsx"],"sourcesContent":["import React, { useRef } from \"react\";\nimport styled from \"styled-components\";\n\nimport { OakFlex, OakIcon, OakIconName } from \"@/components/atoms\";\nimport { InternalCheckBoxLabelHoverDecor } from \"@/components/atoms/InternalCheckBoxLabel\";\nimport {\n  BaseCheckBoxProps,\n  InternalCheckBox,\n} from \"@/components/atoms/InternalCheckBox/InternalCheckBox\";\nimport { parseColor } from \"@/styles/helpers/parseColor\";\nimport { parseBorder } from \"@/styles/helpers/parseBorder\";\nimport { parseDropShadow } from \"@/styles/helpers/parseDropShadow\";\nimport { parseColorFilter } from \"@/styles/helpers/parseColorFilter\";\n\n// Converted to styled-component so it can be used in '&:checked:not(:disabled) + ${StyledOakIcon}' to change svg color.\nconst StyledOakIcon = styled(OakIcon)``;\n\nconst StyledInternalCheckBox = styled(InternalCheckBox)<{\n  keepIconColor?: boolean;\n}>`\n  position: absolute;\n  opacity: 0;\n  pointer-events: none;\n\n  &:checked:not(:disabled) + ${StyledOakIcon} {\n    filter: ${(props) =>\n      props.keepIconColor ? \"none\" : parseColorFilter(\"white\")};\n  }\n\n  &:checked:not(:disabled) {\n    border: ${parseBorder(\"border-solid-l\")};\n    border-color: ${parseColor(\"border-primary\")};\n  }\n\n  &:checked:disabled {\n    border: ${parseBorder(\"border-solid-l\")};\n    border-color: ${parseColor(\"text-disabled\")};\n  }\n\n  &:hover:not(:disabled) {\n    background: ${parseColor(\"bg-primary\")};\n  }\n`;\n\nconst StyledFlexBox = styled(OakFlex)`\n  &:has(input:not(:disabled)) {\n    cursor: pointer;\n  }\n\n  &:has(input:disabled) {\n    pointer-events: none;\n    cursor: none;\n  }\n\n  &:hover:has(input:not(:disabled)) ${InternalCheckBoxLabelHoverDecor} {\n    text-decoration: underline;\n  }\n\n  &:hover:has(input:not(:disabled)) {\n    background-color: ${parseColor(\"bg-neutral\")};\n  }\n\n  &:focus-within {\n    box-shadow: ${parseDropShadow(\"drop-shadow-centered-lemon\")},\n      ${parseDropShadow(\"drop-shadow-centered-grey\")};\n  }\n\n  &:has(input:checked:not(:disabled)) {\n    background-color: ${parseColor(\"black\")};\n    color: ${parseColor(\"white\")};\n  }\n`;\n\nexport type OakSearchFilterCheckBoxProps = Omit<\n  BaseCheckBoxProps,\n  \"defaultChecked\"\n> & {\n  innerRef?: React.RefObject<HTMLInputElement>;\n  displayValue: string;\n  icon?: OakIconName;\n  keepIconColor?: boolean;\n};\n\n/**\n * A checkbox for search filters.\n *\n * Takes a displayValue and optional icon, for subject icons 'subject-[subjectSlug]' should be used.\n *\n * ## Events\n * The following callbacks are available for tracking focus events:\n *\n * ### onChange\n * onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n *\n * ### onFocus\n *   onFocus?: (event: React.FocusEvent<HTMLInputElement>) => void;\n *\n * ### onBlur\n *    onBlur?: (event: React.FocusEvent<HTMLInputElement>) => void;\n *\n * ### onHovered\n *  `onHovered?: (id, value, duration: number) => void;`<br>\n *  called after a mouseEnter and mouseLeave event has happened\n *\n */\nexport const OakSearchFilterCheckBox = (\n  props: OakSearchFilterCheckBoxProps,\n) => {\n  const { id, value, disabled, innerRef, displayValue, icon, ...rest } = props;\n\n  const defaultRef = useRef<HTMLInputElement>(null);\n  const inputRef = innerRef ?? defaultRef;\n\n  const handleContainerClick = (\n    e:\n      | React.MouseEvent<HTMLDivElement>\n      | React.MouseEvent<HTMLInputElement>\n      | React.MouseEvent<HTMLLabelElement>,\n  ) => {\n    const inputId = (e.target as HTMLInputElement).id;\n\n    if (inputId !== id) {\n      inputRef.current?.click();\n    }\n  };\n\n  return (\n    <OakFlex $minHeight={\"all-spacing-8\"} $position={\"relative\"}>\n      <StyledFlexBox\n        $borderRadius={\"border-radius-s\"}\n        $borderColor={\"border-neutral-lighter\"}\n        $ba=\"border-solid-s\"\n        $background={\"white\"}\n        onClick={handleContainerClick}\n        $ph={\"inner-padding-s\"}\n        $pv={\"inner-padding-ssx\"}\n        $gap={\"space-between-sssx\"}\n      >\n        <StyledInternalCheckBox\n          id={id}\n          value={value}\n          disabled={disabled}\n          ref={inputRef}\n          {...rest}\n        />\n        {icon && <StyledOakIcon alt=\"\" iconName={icon} />}\n        <InternalCheckBoxLabelHoverDecor\n          pointerEvents=\"none\"\n          htmlFor={id}\n          $font={\"heading-7\"}\n          disabled={disabled}\n        >\n          {displayValue}\n        </InternalCheckBoxLabelHoverDecor>\n      </StyledFlexBox>\n    </OakFlex>\n  );\n};\n"],"names":["StyledOakIcon","styled","OakIcon","StyledInternalCheckBox","InternalCheckBox","props","keepIconColor","parseColorFilter","parseBorder","parseColor","StyledFlexBox","OakFlex","InternalCheckBoxLabelHoverDecor","parseDropShadow","OakSearchFilterCheckBox","id","value","disabled","innerRef","displayValue","icon","rest","defaultRef","useRef","inputRef","React","createElement","$minHeight","$borderRadius","$ba","$background","onClick","e","target","current","click","$ph","$pv","ref","alt","iconName","pointerEvents","htmlFor","$font"],"mappings":"8oDAeA,MAAMA,EAAgBC,EAAOC,EAAQ,GAE/BC,EAAyBF,EAAOG,EAEpC;;;;;+BAK6BJ;cAChBK,GACTA,EAAMC,cAAgB,OAASC,EAAiB;;;;cAIxCC,EAAY;oBACNC,EAAW;;;;cAIjBD,EAAY;oBACNC,EAAW;;;;kBAIbA,EAAW;;EAIvBC,EAAgBT,EAAOU,EAAQ;;;;;;;;;;sCAUCC;;;;;wBAKdH,EAAW;;;;kBAIjBI,EAAgB;QAC1BA,EAAgB;;;;wBAIAJ,EAAW;aACtBA,EAAW;;EAoCXK,EACXT,IAEA,MAAMU,GAAEA,EAAEC,MAAEA,EAAKC,SAAEA,EAAQC,SAAEA,EAAQC,aAAEA,EAAYC,KAAEA,KAASC,GAAShB,EAEjEiB,EAAaC,EAAyB,MACtCC,EAAWN,GAAYI,EAe7B,OACEG,EAACC,cAAAf,EAAoB,CAAAgB,WAAA,0BAA4B,YAC/CF,EAAAC,cAAChB,EACgB,CAAAkB,cAAA,+BACD,yBAAwBC,IAClC,iBACSC,YAAA,QACbC,QAnBJC,IAKiBA,EAAEC,OAA4BlB,KAE/BA,GACdS,EAASU,SAASC,OACnB,EAUgCC,IACxB,kBACAC,IAAA,yBACC,sBAENZ,EAAAC,cAACvB,EACC,CAAAY,GAAIA,EACJC,MAAOA,EACPC,SAAUA,EACVqB,IAAKd,KACDH,IAELD,GAAQK,EAACC,cAAA1B,EAAc,CAAAuC,IAAI,GAAGC,SAAUpB,IACzCK,EAACC,cAAAd,GACC6B,cAAc,OACdC,QAAS3B,EAAE4B,MACJ,YACP1B,SAAUA,GAETE,IAIP"}