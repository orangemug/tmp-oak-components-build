{"version":3,"file":"OakRadioAsButton.js","sources":["../../../../../../src/components/organisms/curriculum/OakRadioAsButton/OakRadioAsButton.tsx"],"sourcesContent":["import React, { useContext, useId, useRef } from \"react\";\nimport styled from \"styled-components\";\n\nimport { OakFlex, OakIcon, OakIconName } from \"@/components/atoms\";\nimport { InternalCheckBoxLabelHoverDecor } from \"@/components/atoms/InternalCheckBoxLabel\";\nimport {\n  BaseRadioProps,\n  InternalRadio,\n} from \"@/components/atoms/InternalRadio/InternalRadio\";\nimport { parseColor } from \"@/styles/helpers/parseColor\";\nimport { parseBorder } from \"@/styles/helpers/parseBorder\";\nimport { parseDropShadow } from \"@/styles/helpers/parseDropShadow\";\nimport { parseColorFilter } from \"@/styles/helpers/parseColorFilter\";\nimport { RadioContext } from \"@/components/molecules/OakRadioGroup/OakRadioGroup\";\n\n// Converted to styled-component so it can be used in '&:checked:not(:disabled) + ${StyledOakIcon}' to change svg color.\nconst StyledOakIcon = styled(OakIcon)``;\n\nconst StyledInternalRadio = styled(InternalRadio)<{\n  keepIconColor?: boolean;\n}>`\n  position: absolute;\n  opacity: 0;\n  pointer-events: none;\n\n  &:checked:not(:disabled) + ${StyledOakIcon} {\n    filter: ${(props) =>\n      props.keepIconColor ? \"none\" : parseColorFilter(\"white\")};\n  }\n\n  &:checked:not(:disabled) {\n    border: ${parseBorder(\"border-solid-l\")};\n    border-color: ${parseColor(\"border-primary\")};\n  }\n\n  &:checked:disabled {\n    border: ${parseBorder(\"border-solid-l\")};\n    border-color: ${parseColor(\"text-disabled\")};\n  }\n\n  &:hover:not(:disabled) {\n    background: ${parseColor(\"bg-primary\")};\n  }\n`;\n\nconst StyledFlexBox = styled(OakFlex)`\n  &:has(input:not(:disabled)) {\n    cursor: pointer;\n  }\n\n  &:has(input:disabled) {\n    pointer-events: none;\n    cursor: none;\n  }\n\n  &:hover:has(input:not(:disabled)) ${InternalCheckBoxLabelHoverDecor} {\n    text-decoration: underline;\n  }\n\n  &:hover:has(input:not(:disabled)) {\n    background-color: ${parseColor(\"bg-neutral\")};\n  }\n\n  &:focus-within {\n    box-shadow: ${parseDropShadow(\"drop-shadow-centered-lemon\")},\n      ${parseDropShadow(\"drop-shadow-centered-grey\")};\n  }\n\n  &:has(input:checked:not(:disabled)) {\n    background-color: ${parseColor(\"black\")};\n    color: ${parseColor(\"white\")};\n  }\n`;\n\nexport type OakRadioAsButtonProps = Omit<\n  BaseRadioProps,\n  \"defaultChecked\" | \"id\" | \"checked\"\n> & {\n  innerRef?: React.RefObject<HTMLInputElement>;\n  displayValue: string;\n  icon?: OakIconName;\n  keepIconColor?: boolean;\n  disabled?: HTMLInputElement[\"disabled\"];\n  value?: HTMLInputElement[\"value\"];\n  \"aria-labelledby\"?: React.AriaAttributes[\"aria-labelledby\"];\n  \"aria-label\"?: React.AriaAttributes[\"aria-label\"];\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n};\n\n/**\n * A radio input styled as a button, to be used within `<OakRadioGroup/>` this is\n * the radio inputs version of `<OakSearchFilterCheckBox/>`\n *\n * ## Events\n * The following callbacks are available for tracking focus events:\n *\n * ### onChange\n *  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n *\n * ### onFocus\n *   onFocus?: (event: React.FocusEvent<HTMLInputElement>) => void;\n *\n * ### onBlur\n *    onBlur?: (event: React.FocusEvent<HTMLInputElement>) => void;\n *\n * ### onHovered\n *  `onHovered?: (id, value, duration: number) => void;`<br>\n *  called after a mouseEnter and mouseLeave event has happened\n *\n */\nexport const OakRadioAsButton = (props: OakRadioAsButtonProps) => {\n  const id = useId();\n  const { value, disabled, innerRef, displayValue, icon, onChange, ...rest } =\n    props;\n  const { name, onValueUpdated, currentValue } = useContext(RadioContext);\n\n  const defaultRef = useRef<HTMLInputElement>(null);\n  const inputRef = innerRef ?? defaultRef;\n\n  const handleContainerClick = (\n    e:\n      | React.MouseEvent<HTMLDivElement>\n      | React.MouseEvent<HTMLInputElement>\n      | React.MouseEvent<HTMLLabelElement>,\n  ) => {\n    const el = e.target as HTMLInputElement;\n\n    if (!el.isEqualNode(inputRef.current)) {\n      inputRef.current?.click();\n    }\n  };\n\n  const isChecked = currentValue === value;\n\n  return (\n    <OakFlex $minHeight={\"all-spacing-8\"} $position={\"relative\"}>\n      <StyledFlexBox\n        $borderRadius={\"border-radius-s\"}\n        $borderColor={\"border-neutral-lighter\"}\n        $ba=\"border-solid-s\"\n        $background={\"white\"}\n        onClick={handleContainerClick}\n        $ph={\"inner-padding-s\"}\n        $pv={\"inner-padding-ssx\"}\n        $gap={\"space-between-sssx\"}\n      >\n        <StyledInternalRadio\n          {...rest}\n          id={id}\n          value={value}\n          disabled={disabled}\n          ref={inputRef}\n          onChange={(e) => {\n            onValueUpdated?.(e);\n            onChange?.(e);\n          }}\n          name={name}\n          defaultChecked={isChecked}\n        />\n        {icon && <StyledOakIcon alt=\"\" iconName={icon} />}\n        <InternalCheckBoxLabelHoverDecor\n          pointerEvents=\"none\"\n          htmlFor={id}\n          $font={\"heading-7\"}\n          disabled={disabled}\n        >\n          {displayValue}\n        </InternalCheckBoxLabelHoverDecor>\n      </StyledFlexBox>\n    </OakFlex>\n  );\n};\n"],"names":["StyledOakIcon","styled","OakIcon","StyledInternalRadio","InternalRadio","props","keepIconColor","parseColorFilter","parseBorder","parseColor","StyledFlexBox","OakFlex","InternalCheckBoxLabelHoverDecor","parseDropShadow","OakRadioAsButton","id","useId","value","disabled","innerRef","displayValue","icon","onChange","rest","name","onValueUpdated","currentValue","useContext","RadioContext","defaultRef","useRef","inputRef","isChecked","React","createElement","$minHeight","$borderRadius","$ba","$background","onClick","e","target","isEqualNode","current","click","$ph","$pv","ref","defaultChecked","alt","iconName","pointerEvents","htmlFor","$font"],"mappings":"ivDAgBA,MAAMA,EAAgBC,EAAOC,EAAQ,GAE/BC,EAAsBF,EAAOG,EAEjC;;;;;+BAK6BJ;cAChBK,GACTA,EAAMC,cAAgB,OAASC,EAAiB;;;;cAIxCC,EAAY;oBACNC,EAAW;;;;cAIjBD,EAAY;oBACNC,EAAW;;;;kBAIbA,EAAW;;EAIvBC,EAAgBT,EAAOU,EAAQ;;;;;;;;;;sCAUCC;;;;;wBAKdH,EAAW;;;;kBAIjBI,EAAgB;QAC1BA,EAAgB;;;;wBAIAJ,EAAW;aACtBA,EAAW;;EAwCXK,EAAoBT,IAC/B,MAAMU,EAAKC,KACLC,MAAEA,EAAKC,SAAEA,EAAQC,SAAEA,EAAQC,aAAEA,EAAYC,KAAEA,EAAIC,SAAEA,KAAaC,GAClElB,GACImB,KAAEA,EAAIC,eAAEA,EAAcC,aAAEA,GAAiBC,EAAWC,GAEpDC,EAAaC,EAAyB,MACtCC,EAAWZ,GAAYU,EAevBG,EAAYN,IAAiBT,EAEnC,OACEgB,EAACC,cAAAvB,EAAoB,CAAAwB,WAAA,0BAA4B,YAC/CF,EAAAC,cAACxB,EACgB,CAAA0B,cAAA,+BACD,yBAAwBC,IAClC,iBACSC,YAAA,QACbC,QArBJC,IAKWA,EAAEC,OAELC,YAAYX,EAASY,UAC3BZ,EAASY,SAASC,OACnB,EAYgCC,IACxB,kBACAC,IAAA,yBACC,sBAENb,EAACC,cAAA/B,EACK,IAAAoB,EACJR,GAAIA,EACJE,MAAOA,EACPC,SAAUA,EACV6B,IAAKhB,EACLT,SAAWkB,IACTf,IAAiBe,GACjBlB,IAAWkB,EAAE,EAEfhB,KAAMA,EACNwB,eAAgBhB,IAEjBX,GAAQY,EAACC,cAAAlC,EAAc,CAAAiD,IAAI,GAAGC,SAAU7B,IACzCY,EAACC,cAAAtB,GACCuC,cAAc,OACdC,QAASrC,EAAEsC,MACJ,YACPnC,SAAUA,GAETE,IAIP"}