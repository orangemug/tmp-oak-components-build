{"version":3,"file":"InternalRadio.js","sources":["../../../../../src/components/atoms/InternalRadio/InternalRadio.tsx"],"sourcesContent":["import React, { forwardRef, useRef } from \"react\";\nimport styled, { css } from \"styled-components\";\n\nimport { OakBorderRadiusToken, OakCombinedColorToken } from \"@/styles\";\nimport { parseBorderRadius } from \"@/styles/helpers/parseBorderRadius\";\nimport { parseColor } from \"@/styles/helpers/parseColor\";\nimport { parseDropShadow } from \"@/styles/helpers/parseDropShadow\";\nimport { BorderStyleProps, borderStyle } from \"@/styles/utils/borderStyle\";\nimport { ColorStyleProps, colorStyle } from \"@/styles/utils/colorStyle\";\nimport { SizeStyleProps, sizeStyle } from \"@/styles/utils/sizeStyle\";\nimport { SpacingStyleProps, spacingStyle } from \"@/styles/utils/spacingStyle\";\n\n/**\n *\n * These components can be used with InternalRadioWrapper which allows for customisable icons\n *\n * Several flavours of Radio are created here:\n *  - Default\n *  - Hover decorations\n *  - Focus decorations\n *  - Hover + Focus decorations\n *\n * As they are styled components they can be further customised in implementation. Alternatively additional\n * components can be created here.\n *\n */\n\nexport type BaseRadioProps = {\n  id: string;\n  disabled?: boolean;\n  value: string;\n  name?: string;\n  /**\n   * Uncontrolled checked state\n   */\n  defaultChecked?: boolean;\n  /**\n   * Controlled checked state\n   */\n  checked?: boolean;\n  onHovered?: (value: string, id: string, duration: number) => void;\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  onFocus?: (event: React.FocusEvent<HTMLInputElement>) => void;\n  onBlur?: (event: React.FocusEvent<HTMLInputElement>) => void;\n  \"aria-label\"?: string;\n  \"aria-labelledby\"?: string;\n  \"data-testid\"?: string;\n};\n\nconst BaseRadio = forwardRef(\n  (props: BaseRadioProps, ref?: React.Ref<HTMLInputElement>) => {\n    const { onHovered, ...rest } = props;\n\n    const hoverStart = useRef(Date.now());\n\n    const handleMouseEnter = () => {\n      hoverStart.current = Date.now();\n    };\n\n    const handleMouseLeave = () => {\n      const delta = Date.now() - hoverStart.current;\n      if (onHovered) {\n        onHovered(props.value, props.id, delta);\n      }\n    };\n\n    return (\n      <input\n        ref={ref}\n        type=\"radio\"\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        {...rest}\n      />\n    );\n  },\n);\n\ntype StyledBaseRadioProps = BaseRadioProps &\n  ColorStyleProps &\n  SpacingStyleProps &\n  BorderStyleProps &\n  SizeStyleProps & {\n    $checkedBackground?: OakCombinedColorToken | null;\n    $checkedBorderColor?: OakCombinedColorToken;\n    $uncheckedBorderColor?: OakCombinedColorToken;\n  };\n\ntype HoverBaseRadioProps = {\n  $hoverBorderRadius: OakBorderRadiusToken;\n};\n\n/**\n *\n * These components can be used with InternalRadioWrapper which allows for customisable icons\n *\n * Several flavours of Radio are created here:\n *  - Default\n *  - Hover decorations\n *  - Focus decorations\n *  - Hover + Focus decorations\n *\n * NB. Hover decorations must be wrapped in a box with position relative to allow for the hover effect to work\n *\n * As they are styled components they can be further customised in implementation. Alternatively additional\n * components can be created here.\n *\n *\n * ## Events\n * The following callbacks are available for tracking focus events:\n *\n * ### onChange\n * onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n *\n * ### onFocus\n *   onFocus?: (event: React.FocusEvent<HTMLInputElement>) => void;\n *\n * ### onBlur\n *    onBlur?: (event: React.FocusEvent<HTMLInputElement>) => void;\n *\n * ### onHovered\n *  `onHovered?: (id, value, duration: number) => void;`<br>\n *  called after a mouseEnter and mouseLeave event has happened\n *\n *\n */\nexport const InternalRadio = styled(BaseRadio)<StyledBaseRadioProps>`\n  /* removing default appearance */\n  -webkit-appearance: none;\n  appearance: none;\n  cursor: pointer;\n  margin: 0;\n  outline: none;\n  ${borderStyle}\n  ${colorStyle}\n  ${spacingStyle}\n  ${sizeStyle}\n\n  border-color: ${(props) => parseColor(props.$uncheckedBorderColor)};\n\n  &:checked {\n    ${(props) => css`\n      background: ${parseColor(props.$checkedBackground)};\n      border-color: ${parseColor(props.$checkedBorderColor)};\n    `};\n  }\n\n  &:disabled {\n    pointer-events: none;\n  }\n\n  @media (hover: hover) {\n    &:hover:not(:disabled) {\n      border-color: ${(props) => parseColor(props.$checkedBackground)};\n    }\n  }\n`;\n\nInternalRadio.defaultProps = {\n  $borderRadius: \"border-radius-xs\",\n  $ba: \"border-solid-m\",\n  $borderColor: \"text-primary\",\n  $checkedBackground: \"text-primary\",\n};\n\nexport const InternalRadioHover = styled(InternalRadio)<\n  StyledBaseRadioProps & HoverBaseRadioProps\n>`\n  /* @media wrapper is required to prevent hover effect on iOS Safari */\n\n  @media (hover: hover) {\n    &:hover:not(&:checked):not(&:disabled)::after {\n      content: \"\";\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      width: 60%;\n      height: 60%;\n      transform: translate(-50%, -50%);\n      border-radius: ${(props) => parseBorderRadius(props.$hoverBorderRadius)};\n      background: ${(props) => parseColor(props.$checkedBackground)};\n    }\n  }\n`;\n\nInternalRadioHover.defaultProps = {\n  $hoverBorderRadius: \"border-radius-xs\",\n};\n\nconst focusStyle = css`\n  &:focus-visible {\n    box-shadow: ${parseDropShadow(\"drop-shadow-centered-lemon\")};\n  }\n`;\n\nexport const InternalRadioFocus = styled(InternalRadio)<StyledBaseRadioProps>`\n  ${focusStyle}\n`;\n\nexport const InternalRadioHoverFocus = styled(InternalRadioHover)<\n  StyledBaseRadioProps & HoverBaseRadioProps\n>`\n  ${focusStyle}\n`;\n"],"names":["InternalRadio","styled","forwardRef","props","ref","onHovered","rest","hoverStart","useRef","Date","now","React","type","onMouseEnter","current","onMouseLeave","delta","value","id","borderStyle","colorStyle","spacingStyle","sizeStyle","parseColor","$uncheckedBorderColor","css","$checkedBackground","$checkedBorderColor","defaultProps","$borderRadius","$ba","$borderColor","InternalRadioHover","parseBorderRadius","$hoverBorderRadius","focusStyle","parseDropShadow"],"mappings":"skBAiDA,MA6EaA,EAAgBC,EA7EXC,GAChB,CAACC,EAAuBC,KACtB,MAAMC,UAAEA,KAAcC,GAASH,EAEzBI,EAAaC,EAAOC,KAAKC,OAa/B,OACEC,yBACEP,IAAKA,EACLQ,KAAK,QACLC,aAfqB,KACvBN,EAAWO,QAAUL,KAAKC,KAAK,EAe7BK,aAZqB,KACvB,MAAMC,EAAQP,KAAKC,MAAQH,EAAWO,QAClCT,GACFA,EAAUF,EAAMc,MAAOd,EAAMe,GAAIF,EAClC,KASKV,GAEN,IAoD8D;;;;;;;IAOhEa;IACAC;IACAC;IACAC;;kBAEenB,GAAUoB,EAAWpB,EAAMqB;;;MAGvCrB,GAAUsB,CAAG;oBACAF,EAAWpB,EAAMuB;sBACfH,EAAWpB,EAAMwB;;;;;;;;;;sBAUhBxB,GAAUoB,EAAWpB,EAAMuB;;;EAKlD1B,EAAc4B,aAAe,CAC3BC,cAAe,mBACfC,IAAK,iBACLC,aAAc,eACdL,mBAAoB,sBAGTM,EAAqB/B,EAAOD,EAExC;;;;;;;;;;;;uBAYuBG,GAAU8B,EAAkB9B,EAAM+B;oBACrC/B,GAAUoB,EAAWpB,EAAMuB;;;EAKhDM,EAAmBJ,aAAe,CAChCM,mBAAoB,oBAGtB,MAAMC,EAAaV,CAAG;;kBAEJW,EAAgB;;EAIAnC,EAAOD,EAAoC;IACzEmC;EAGmClC,EAAO+B,EAE7C;IACGG;"}