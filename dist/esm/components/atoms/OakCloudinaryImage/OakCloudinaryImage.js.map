{"version":3,"file":"OakCloudinaryImage.js","sources":["../../../../../src/components/atoms/OakCloudinaryImage/OakCloudinaryImage.tsx"],"sourcesContent":["import React, { createContext, useContext } from \"react\";\nimport { CldImage, CldImageProps } from \"next-cloudinary\";\n\nimport { getCloudinaryIdFromUrl } from \"./cloudinary\";\n\nimport { OakImage, OakImageProps } from \"@/components/atoms/OakImage\";\n\nexport type OakCloudinaryImageProps = Omit<\n  OakImageProps<typeof CldImage>,\n  \"src\" | \"imageProps\"\n> & {\n  /**\n   * The cloudinary image id or the full cloudinary URL\n   *\n   * Usually in the format `v1234567890/image.jpg`\n   */\n  cloudinaryId: string;\n};\n\nconst cloudinaryConfigContext = createContext<\n  CldImageProps[\"config\"] | undefined\n>(undefined);\n\n/**\n * Provides a Cloudinary config to all descendent `OakCloudinaryImage` elements.\n *\n * See https://cloudinary.com/documentation/cloudinary_sdks#configuration_parameters\n * for documentation of the config object.\n */\nexport const OakCloudinaryConfigProvider = cloudinaryConfigContext.Provider;\n\n/**\n * OakCloudinaryImage wraps OakImage providing responsive images from Cloudinary\n * based on the `sizes` prop.\n *\n * Cloudinary cloud name can be set globally with `NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME` or a config\n * can be passed with `OakCloudinaryConfigProvider`.\n */\nexport const OakCloudinaryImage = ({\n  cloudinaryId,\n  unoptimized = false || cloudinaryId.endsWith(\".svg\"),\n  ...props\n}: OakCloudinaryImageProps) => {\n  const config = useContext(cloudinaryConfigContext);\n  const src = getCloudinaryIdFromUrl(cloudinaryId, config);\n\n  return (\n    <OakImage\n      as={CldImage}\n      src={src}\n      imageProps={{\n        config,\n        flags: unoptimized ? undefined : [\"keep_attribution\"],\n      }}\n      unoptimized={unoptimized}\n      {...props}\n    />\n  );\n};\n"],"names":["cloudinaryConfigContext","createContext","undefined","OakCloudinaryConfigProvider","Provider","OakCloudinaryImage","cloudinaryId","unoptimized","endsWith","props","config","useContext","src","getCloudinaryIdFromUrl","React","createElement","OakImage","as","CldImage","imageProps","flags"],"mappings":"gNAmBA,MAAMA,EAA0BC,OAE9BC,GAQWC,EAA8BH,EAAwBI,SAStDC,EAAqB,EAChCC,eACAC,cAAuBD,EAAaE,SAAS,WAC1CC,MAEH,MAAMC,EAASC,EAAWX,GACpBY,EAAMC,EAAuBP,EAAcI,GAEjD,OACEI,EAAAC,cAACC,EAAQ,CACPC,GAAIC,EACJN,IAAKA,EACLO,WAAY,CACVT,SACAU,MAAOb,OAAcL,EAAY,CAAC,qBAEpCK,YAAaA,KACTE,GAEN"}