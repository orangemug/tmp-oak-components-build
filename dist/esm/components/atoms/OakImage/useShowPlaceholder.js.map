{"version":3,"file":"useShowPlaceholder.js","sources":["../../../../../src/components/atoms/OakImage/useShowPlaceholder.ts"],"sourcesContent":["import { ReactEventHandler, useCallback, useState } from \"react\";\n\nexport function useShowPlaceholder() {\n  // Default to false so that we don't show the placeholder if the image is already complete\n  const [showPlaceholder, setShowPlaceholder] = useState(false);\n  const setImg = useCallback((img: HTMLImageElement | null) => {\n    // the `load` or `error` event may never be called if the image is coming from the cache\n    // so we need to check the `complete` property as well as listen to the `onLoad` and `onError` events\n    img && setShowPlaceholder(!img.complete);\n  }, []);\n\n  return {\n    showPlaceholder,\n    setImg,\n    /**\n     * Wraps the `onLoad` and `onError` events to set the placeholder state\n     */\n    handleComplete(\n      originalHandler?: ReactEventHandler<HTMLImageElement>,\n    ): ReactEventHandler<HTMLImageElement> {\n      return (event) => {\n        if (originalHandler) {\n          originalHandler(event);\n        }\n        setShowPlaceholder(false);\n      };\n    },\n  };\n}\n"],"names":["useShowPlaceholder","showPlaceholder","setShowPlaceholder","useState","setImg","useCallback","img","complete","handleComplete","originalHandler","event"],"mappings":"2DAEgBA,IAEd,MAAOC,EAAiBC,GAAsBC,GAAS,GAOvD,MAAO,CACLF,kBACAG,OARaC,GAAaC,IAG1BA,GAAOJ,GAAoBI,EAAIC,SAAS,GACvC,IAQDC,eACEC,GAEQC,IACFD,GACFA,EAAgBC,GAElBR,GAAmB,EAAM,EAIjC"}