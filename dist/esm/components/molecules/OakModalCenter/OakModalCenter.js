import e,{useState as t,useRef as o,useCallback as a,useLayoutEffect as r,useEffect as n}from"react";import{createPortal as i}from"react-dom";import{FocusOn as s}from"react-focus-on";import{Transition as l}from"react-transition-group";import d from"styled-components";import{InternalShadowRoundButton as m}from"../InternalShadowRoundButton/InternalShadowRoundButton.js";import"../../atoms/OakAnchorTarget/OakAnchorTarget.js";import"../../atoms/OakAspectRatio/OakAspectRatio.js";import{oakBoxCss as c,OakBox as p}from"../../atoms/OakBox/OakBox.js";import"../../atoms/OakCloudinaryImage/OakCloudinaryImage.js";import{OakFlex as k}from"../../atoms/OakFlex/OakFlex.js";import"../../atoms/OakForm/OakForm.js";import"../../atoms/OakGlobalStyle/OakGlobalStyle.js";import"../../atoms/OakGrid/OakGrid.js";import"../../atoms/OakGridArea/OakGridArea.js";import"../../atoms/OakHeading/OakHeading.js";import"../../atoms/OakImage/OakImage.js";import"../../atoms/OakSpan/OakSpan.js";import"../../atoms/OakLI/OakLI.js";import"../../atoms/OakLabel/OakLabel.js";import"../../atoms/OakMaxWidth/OakMaxWidth.js";import"../../atoms/OakOL/OakOL.js";import"../../atoms/OakFieldset/OakFieldset.js";import"../../atoms/OakP/OakP.js";import"../../atoms/OakScreenReader/OakScreenReader.js";import"../../atoms/OakTypography/OakTypography.js";import"../../atoms/OakUL/OakUL.js";import"../../atoms/OakSvg/OakSvg.js";import{parseSpacing as u}from"../../../styles/helpers/parseSpacing.js";const O=d(s)`
  ${c}
`,g=d(p)`
  backdrop-filter: blur(3px);
`,$=d(k)`
  opacity: ${({$state:e})=>{switch(e){case"entered":case"entering":return"1";default:return"0"}}};
  transition: opacity 0s;
`,b=({children:s,domContainer:d,isOpen:c,onClose:b=(()=>{}),disableBackdropClick:h=!1,disableEscapeKey:f=!1,hideCloseButton:x=!1,modalFlexProps:j,modalInnerFlexProps:E,backdropFlexProps:y,footerSlot:I})=>{const[v,C]=t({top:!1,bottom:!1}),w=o(null),S=o(null),L=a((()=>{const e=S.current;e&&(e.scrollHeight>e.clientHeight&&(S.current.tabIndex=0),C({top:e.scrollTop>0,bottom:e.scrollHeight>e.clientHeight}))}),[]);r((()=>(L(),S.current?.addEventListener("scroll",L),()=>{S.current?.removeEventListener("scroll",L)})),[c]),n((()=>(window.addEventListener("resize",L),()=>{window.removeEventListener("resize",L)})));const F="undefined"!=typeof window,B=e.createElement(l,{in:c,nodeRef:w,addEndListener:e=>{w.current?.addEventListener("transitionend",e)},timeout:0,mountOnEnter:!0,unmountOnExit:!0},(t=>e.createElement($,{ref:w,$state:t,$position:"fixed",$inset:"all-spacing-0",$justifyContent:"center",$alignItems:"center",$zIndex:"modal-dialog"},e.createElement(g,{$position:"fixed",$inset:"all-spacing-0",$zIndex:"behind",$background:"blackSemiTransparent","data-testid":"backdrop",...y}),e.createElement(k,{$alignItems:"center",$justifyContent:"center",$maxWidth:"all-spacing-23",$width:"100%",$pa:"inner-padding-l"},e.createElement(O,{onEscapeKey:()=>!f&&b(),onClickOutside:()=>!h&&b(),returnFocus:!0,autoFocus:!0,$width:"100%"},e.createElement(k,{$flexDirection:"column",$background:"white",$borderRadius:"border-radius-l",$width:"100%",$position:"relative",role:"alertdialog",style:{maxHeight:`calc(100vh - ${u("inner-padding-xl5")} - ${u("inner-padding-xl5")})`},...j},e.createElement(p,{$minHeight:"inner-padding-xl5",$position:"relative"},!x&&e.createElement(p,{$position:"absolute",$top:"all-spacing-3",$right:"all-spacing-3"},e.createElement(m,{onClick:b,"aria-label":"Close Modal",defaultIconBackground:"transparent",defaultIconColor:"black",defaultTextColor:"transparent",hoverTextColor:"transparent",disabledTextColor:"transparent",hoverIconBackground:"black",hoverIconColor:"white",disabledIconBackground:"transparent",iconBackgroundSize:"all-spacing-7",iconSize:"all-spacing-7",iconName:"cross","data-testid":"close-button"}))),e.createElement("div",{style:{display:"contents"},"data-autofocus-inside":!0},e.createElement(k,{ref:S,"data-testid":"modal-main-content",$overflow:"auto",$flexDirection:"column",$ph:"inner-padding-xl5",$bt:v.top?"border-solid-s":"border-solid-none",$bb:v.bottom?"border-solid-s":"border-solid-none",$borderColor:"border-neutral-lighter",...E},s),I)))))));return d&&F?i(B,d):B};export{b as OakModalCenter};
//# sourceMappingURL=OakModalCenter.js.map
