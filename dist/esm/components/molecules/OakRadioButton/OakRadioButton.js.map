{"version":3,"file":"OakRadioButton.js","sources":["../../../../../src/components/molecules/OakRadioButton/OakRadioButton.tsx"],"sourcesContent":["import React, { ReactNode, forwardRef, useContext } from \"react\";\nimport styled, { css } from \"styled-components\";\n\nimport { RadioContext } from \"@/components/molecules/OakRadioGroup/OakRadioGroup\";\nimport { parseColor } from \"@/styles/helpers/parseColor\";\nimport { parseSpacing } from \"@/styles/helpers/parseSpacing\";\nimport { parseBorder } from \"@/styles/helpers/parseBorder\";\nimport { FlexStyleProps } from \"@/styles/utils/flexStyle\";\nimport { responsiveStyle } from \"@/styles/utils/responsiveStyle\";\nimport {\n  OakBox,\n  OakBoxProps,\n  OakFlex,\n  OakFlexProps,\n  OakLabel,\n  OakLabelProps,\n} from \"@/components/atoms\";\nimport {\n  OakAllSpacingToken,\n  OakBorderWidthToken,\n  OakCombinedColorToken,\n} from \"@/styles\";\n\ntype RadioButtonLabelProps = {\n  $labelAlignItems?: FlexStyleProps[\"$alignItems\"];\n  $labelGap?: FlexStyleProps[\"$gap\"];\n  disabled?: boolean;\n} & OakLabelProps;\n\nconst RadioButtonLabel = styled(OakLabel)<RadioButtonLabelProps>`\n  ${(props) =>\n    !props.disabled &&\n    css`\n      cursor: pointer;\n    `}\n\n  display: flex;\n  ${responsiveStyle(\"gap\", (props) => props.$labelGap, parseSpacing)}\n  ${responsiveStyle(\"align-items\", (props) => props.$labelAlignItems)}\n`;\n\nconst HiddenRadioButtonInput = styled.input.attrs({\n  type: \"radio\",\n})`\n  position: absolute;\n  opacity: 0;\n  ${(props) =>\n    !props.disabled &&\n    css`\n      cursor: pointer;\n    `}\n`;\n\ntype VisibleRadioButtonInputProps = OakFlexProps & {\n  $disableFocusRing: boolean;\n  $radioInnerSize: OakAllSpacingToken;\n  disabled?: boolean;\n};\n\nconst VisibleRadioButtonInput = styled(OakFlex)<VisibleRadioButtonInputProps>`\n  border-radius: 50%;\n\n  ${(props) =>\n    !props.$disableFocusRing &&\n    css`\n      ${HiddenRadioButtonInput}:focus-visible ~ &::before {\n        content: \"\";\n        height: ${parseSpacing(\"all-spacing-7\")};\n        width: ${parseSpacing(\"all-spacing-7\")};\n        background: \"transparent\"\n        display: block;\n        position: absolute;\n        border-radius: 50%;\n        border: ${parseBorder(\"border-solid-m\")} ${parseColor(\"grey60\")};\n        box-shadow: ${`inset 0 0 0 0.13rem ${parseColor(\"lemon\")}`};\n      }`}\n\n  ${HiddenRadioButtonInput}:checked ~ &::after {\n    content: \"\";\n    height: ${(props) => parseSpacing(props.$radioInnerSize)};\n    width: ${(props) => parseSpacing(props.$radioInnerSize)};\n    background: ${parseColor(\"black\")};\n    position: absolute;\n    border-radius: 50%;\n    border: ${parseBorder(\"border-solid-m\")} ${parseColor(\"white\")};\n  }\n`;\n\n// This is a hack to force React to rerender when the disabled prop is changed. Otherwise the pseudo element is not updated.\nconst DisabledVisibleRadioButtonInput = styled(VisibleRadioButtonInput)`\n  ${HiddenRadioButtonInput}:checked ~ &::after {\n    content: \"\";\n    height: ${(props) => parseSpacing(props.$radioInnerSize)};\n    width: ${(props) => parseSpacing(props.$radioInnerSize)};\n    background: ${parseColor(\"bg-btn-primary-disabled\")};\n    position: absolute;\n    border-radius: 50%;\n    border: ${parseBorder(\"border-solid-m\")} ${parseColor(\"white\")};\n  }\n`;\n\nexport type OakRadioButtonProps = {\n  id: string;\n  label: ReactNode;\n  value: string;\n  tabIndex?: number;\n  \"data-testid\"?: string;\n  disabled?: boolean;\n  required?: boolean;\n  /**\n   * Allows the focus ring to be disabled. This is useful when focus is indicated\n   * by other means, such as a border or background color change.\n   */\n  disableFocusRing?: boolean;\n  /**\n   * Allows the size of the radio button to be customized.\n   */\n  radioOuterSize?: OakAllSpacingToken;\n  /**\n   * Allows the size of the inner \"checked\" circle of the radio button to be customized.\n   */\n  radioInnerSize?: OakAllSpacingToken;\n  /**\n   * Allows the width of the radio button border to be customized.\n   */\n  radioBorderWidth?: OakBorderWidthToken;\n  /**\n   * Allows the background color of the radio button to be customized.\n   */\n  radioBackground?: OakCombinedColorToken;\n  /**\n   * Allows the width of the radio button border to be customized when the radio button is checked.\n   */\n  checkedRadioBorderWidth?: OakBorderWidthToken;\n} & OakBoxProps &\n  RadioButtonLabelProps;\n\n/**\n * A radio button component.\n *\n * Use within `OakRadioGroup` component.\n */\nexport const OakRadioButton = forwardRef<HTMLInputElement, OakRadioButtonProps>(\n  (props, ref) => {\n    const radioContext = useContext(RadioContext);\n    const { currentValue, name, onValueUpdated } = radioContext;\n    const {\n      id,\n      label,\n      value,\n      tabIndex,\n      disabled,\n      required,\n      $labelGap = \"space-between-ssx\",\n      $labelAlignItems = \"center\",\n      $font = \"body-1\",\n      \"data-testid\": dataTestId,\n      disableFocusRing = false,\n      radioInnerSize = \"all-spacing-4\",\n      radioOuterSize = \"all-spacing-6\",\n      radioBorderWidth = \"border-solid-m\",\n      radioBackground = \"bg-primary\",\n      checkedRadioBorderWidth = \"border-solid-m\",\n      ...rest\n    } = props;\n    const checked = value === currentValue;\n    const anyDisabled = disabled || radioContext.disabled;\n    const finalRadioBorderWidth = checked\n      ? checkedRadioBorderWidth\n      : radioBorderWidth;\n\n    return (\n      <OakBox {...rest}>\n        <RadioButtonLabel\n          htmlFor={id}\n          $labelAlignItems={$labelAlignItems}\n          $labelGap={$labelGap}\n          $font={$font}\n          data-testid={dataTestId}\n          disabled={anyDisabled}\n        >\n          <HiddenRadioButtonInput\n            name={name}\n            id={id}\n            value={value}\n            onChange={onValueUpdated}\n            checked={value === currentValue}\n            tabIndex={tabIndex}\n            disabled={anyDisabled}\n            ref={ref}\n            required={required}\n          />\n          {!anyDisabled ? (\n            <VisibleRadioButtonInput\n              $height={radioOuterSize}\n              $width={radioOuterSize}\n              $ba={finalRadioBorderWidth}\n              $borderColor={\"black\"}\n              $flexGrow={0}\n              $flexShrink={0}\n              $alignItems={\"center\"}\n              $justifyContent={\"center\"}\n              $background={radioBackground}\n              $disableFocusRing={!!disableFocusRing}\n              $radioInnerSize={radioInnerSize}\n            />\n          ) : (\n            <DisabledVisibleRadioButtonInput\n              $height={radioOuterSize}\n              $width={radioOuterSize}\n              $ba={finalRadioBorderWidth}\n              $borderColor={\"bg-btn-primary-disabled\"}\n              $flexGrow={0}\n              $flexShrink={0}\n              $alignItems={\"center\"}\n              $justifyContent={\"center\"}\n              $background={radioBackground}\n              $disableFocusRing={!!disableFocusRing}\n              $radioInnerSize={radioInnerSize}\n            />\n          )}\n          {label}\n        </RadioButtonLabel>\n      </OakBox>\n    );\n  },\n);\n\nexport type OakRadioButtonType = typeof OakRadioButton;\n"],"names":["RadioButtonLabel","styled","OakLabel","props","disabled","css","responsiveStyle","$labelGap","parseSpacing","$labelAlignItems","HiddenRadioButtonInput","input","attrs","type","VisibleRadioButtonInput","OakFlex","$disableFocusRing","parseBorder","parseColor","$radioInnerSize","DisabledVisibleRadioButtonInput","OakRadioButton","forwardRef","ref","radioContext","useContext","RadioContext","currentValue","name","onValueUpdated","id","label","value","tabIndex","required","$font","dataTestId","disableFocusRing","radioInnerSize","radioOuterSize","radioBorderWidth","radioBackground","checkedRadioBorderWidth","rest","checked","anyDisabled","finalRadioBorderWidth","React","createElement","OakBox","htmlFor","onChange","$height","$width","$ba","$borderColor","$flexGrow","$flexShrink","$alignItems","$justifyContent","$background"],"mappings":"s7CA6BA,MAAMA,EAAmBC,EAAOC,EAAgC;IAC3DC,IACAA,EAAMC,UACPC,CAAG;;;;;IAKHC,EAAgB,OAAQH,GAAUA,EAAMI,WAAWC;IACnDF,EAAgB,eAAgBH,GAAUA,EAAMM;EAG9CC,EAAyBT,EAAOU,MAAMC,MAAM,CAChDC,KAAM,SACN;;;IAGGV,IACAA,EAAMC,UACPC,CAAG;;;EAWDS,EAA0Bb,EAAOc,EAAsC;;;IAGxEZ,IACAA,EAAMa,mBACPX,CAAG;QACCK;;kBAEUF,EAAa;iBACdA,EAAa;;;;;kBAKZS,EAAY,qBAAqBC,EAAW;sBACxC,uBAAuBA,EAAW;;;IAGpDR;;cAEWP,GAAUK,EAAaL,EAAMgB;aAC9BhB,GAAUK,EAAaL,EAAMgB;kBACzBD,EAAW;;;cAGfD,EAAY,qBAAqBC,EAAW;;EAKpDE,EAAkCnB,EAAOa,EAAwB;IACnEJ;;cAEWP,GAAUK,EAAaL,EAAMgB;aAC9BhB,GAAUK,EAAaL,EAAMgB;kBACzBD,EAAW;;;cAGfD,EAAY,qBAAqBC,EAAW;;EA6C7CG,EAAiBC,GAC5B,CAACnB,EAAOoB,KACN,MAAMC,EAAeC,EAAWC,IAC1BC,aAAEA,EAAYC,KAAEA,EAAIC,eAAEA,GAAmBL,GACzCM,GACJA,EAAEC,MACFA,EAAKC,MACLA,EAAKC,SACLA,EAAQ7B,SACRA,EAAQ8B,SACRA,EAAQ3B,UACRA,EAAY,oBAAmBE,iBAC/BA,EAAmB,SAAQ0B,MAC3BA,EAAQ,SACR,cAAeC,EAAUC,iBACzBA,GAAmB,EAAKC,eACxBA,EAAiB,gBAAeC,eAChCA,EAAiB,gBAAeC,iBAChCA,EAAmB,iBAAgBC,gBACnCA,EAAkB,aAAYC,wBAC9BA,EAA0B,oBACvBC,GACDxC,EACEyC,EAAUZ,IAAUL,EACpBkB,EAAczC,GAAYoB,EAAapB,SACvC0C,EAAwBF,EAC1BF,EACAF,EAEJ,OACEO,EAAAC,cAACC,EAAM,IAAKN,GACVI,EAAAC,cAAChD,EACC,CAAAkD,QAASpB,mBACSrB,EAAgBF,UACvBA,EAAS4B,MACbA,EACM,cAAAC,EACbhC,SAAUyC,GAEVE,EAAAC,cAACtC,EACC,CAAAkB,KAAMA,EACNE,GAAIA,EACJE,MAAOA,EACPmB,SAAUtB,EACVe,QAASZ,IAAUL,EACnBM,SAAUA,EACV7B,SAAUyC,EACVtB,IAAKA,EACLW,SAAUA,IAEVW,EAeAE,EAAAC,cAAC5B,EAA+B,CAAAgC,QACrBb,EAAcc,OACfd,EAAce,IACjBR,EAAqBS,aACZ,0BACHC,UAAA,EACEC,YAAA,EACAC,YAAA,SACIC,gBAAA,SACJC,YAAAnB,EACMzB,oBAAEqB,EACJlB,gBAAAmB,IAzBnBS,EAAAC,cAAClC,EAAuB,CAAAsC,QACbb,EAAcc,OACfd,EAAce,IACjBR,EACSS,aAAA,QACHC,UAAA,EACEC,YAAA,EACAC,YAAA,SACIC,gBAAA,SACJC,YAAAnB,EACMzB,oBAAEqB,kBACJC,IAiBpBP,GAGL"}