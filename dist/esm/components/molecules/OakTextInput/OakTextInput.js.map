{"version":3,"file":"OakTextInput.js","sources":["../../../../../src/components/molecules/OakTextInput/OakTextInput.tsx"],"sourcesContent":["import React, { ChangeEventHandler } from \"react\";\nimport styled, { css } from \"styled-components\";\n\nimport { parseColor } from \"@/styles/helpers/parseColor\";\nimport {\n  InternalTextInput,\n  InternalTextInputProps,\n} from \"@/components/atoms/InternalTextInput\";\nimport { OakFlex, OakIcon, OakIconName } from \"@/components/atoms\";\nimport { OakCombinedColorToken, OakDropShadowToken } from \"@/styles\";\nimport { parseDropShadow } from \"@/styles/helpers/parseDropShadow\";\nimport { SizeStyleProps } from \"@/styles/utils/sizeStyle\";\n\ntype StyledTextInputWrapperProps = {\n  $color: OakCombinedColorToken;\n  $hoverBackground: OakCombinedColorToken;\n  $background: OakCombinedColorToken;\n  $borderColor: OakCombinedColorToken;\n  $focusRingDropShadows: OakDropShadowToken[];\n  $disabledBackgroundColor: OakCombinedColorToken;\n  $readOnlyBorderColor: OakCombinedColorToken;\n  $disabledColor: OakCombinedColorToken;\n  $readOnlyColor: OakCombinedColorToken;\n  $disabled: boolean;\n  $readOnly: boolean;\n};\n\nexport type OakTextInputProps = {\n  /**\n   * Disables user input and updates the appearance accordingly.\n   */\n  disabled?: boolean;\n  /**\n   * Makes the input read-only. Preventing the user from changing the value.\n   */\n  readOnly?: boolean;\n  /**\n   * Sets the value. Use this in controlled components;\n   */\n  value?: string;\n  /**\n   * Sets the initial value. Use this for an uncontrolled component;\n   */\n  defaultValue?: string;\n  /**\n   * Used to target the input element in tests.\n   */\n  \"data-testid\"?: string;\n  onChange?: ChangeEventHandler<HTMLInputElement>;\n  /**\n   * Alters the appearance of the input field to indicate whether the input is valid or invalid.\n   */\n  validity?: \"valid\" | \"invalid\";\n  /**\n   * Adds an icon to the input\n   *\n   * Defaults to the start of the input\n   */\n  iconName?: OakIconName;\n  /**\n   * Position the icon at the end of the input\n   */\n  isTrailingIcon?: boolean;\n  /**\n   * Give the field a highlight to draw attention to it\n   */\n  isHighlighted?: boolean;\n  iconColor?: OakCombinedColorToken;\n  validBorderColor?: OakCombinedColorToken;\n  invalidBorderColor?: OakCombinedColorToken;\n  validIconColor?: OakCombinedColorToken;\n  invalidIconColor?: OakCombinedColorToken;\n  color?: OakCombinedColorToken;\n  hoverBackground?: OakCombinedColorToken;\n  background?: OakCombinedColorToken;\n  borderColor?: OakCombinedColorToken;\n  focusRingDropShadows?: OakDropShadowToken[];\n  disabledBackgroundColor?: OakCombinedColorToken;\n  readOnlyBorderColor?: OakCombinedColorToken;\n  disabledColor?: OakCombinedColorToken;\n  readOnlyColor?: OakCombinedColorToken;\n  highlightBackgroundColor?: OakCombinedColorToken;\n  /**\n   * The width of the surrounding div - the input and icon will fill this\n   */\n  wrapperWidth?: SizeStyleProps[\"$width\"];\n  wrapperMaxWidth?: SizeStyleProps[\"$maxWidth\"];\n  iconAlt?: string;\n} & InternalTextInputProps;\n\nconst StyledTextInputWrapper = styled(OakFlex)<StyledTextInputWrapperProps>`\n  &:hover {\n    cursor: text;\n  }\n\n  &:focus-within {\n    box-shadow: ${(props) =>\n      props.$focusRingDropShadows\n        .map((dropShadow) => parseDropShadow(dropShadow))\n        .join(\",\")};\n  }\n\n  background: ${(props) => parseColor(props.$background)};\n\n  ${(props) =>\n    !props.$readOnly &&\n    css`\n      @media (hover: hover) {\n        &:hover:not(:focus-within) {\n          background: ${parseColor(props.$hoverBackground)};\n        }\n      }\n    `}\n\n  ${(props) =>\n    props.$readOnly &&\n    css`\n      border-color: ${parseColor(props.$readOnlyBorderColor)};\n      color: ${parseColor(props.$readOnlyColor)};\n    `}\n\n  ${(props) =>\n    props.$disabled &&\n    css`\n      background: ${parseColor(props.$disabledBackgroundColor)};\n      color: ${parseColor(props.$disabledColor)};\n      &:hover {\n        cursor: not-allowed;\n      }\n    `}\n`;\n\n/**\n * Default input which can be extended to create specialised inputs.\n */\nexport const OakTextInput = ({\n  type = \"text\",\n  borderColor = \"border-primary\",\n  readOnlyBorderColor = \"border-neutral\",\n  focusRingDropShadows = [\n    \"drop-shadow-centered-lemon\",\n    \"drop-shadow-centered-grey\",\n  ],\n  background = \"bg-primary\",\n  hoverBackground = \"bg-neutral\",\n  disabledBackgroundColor = \"bg-neutral\",\n  highlightBackgroundColor = \"bg-decorative5-main\",\n  color = \"text-primary\",\n  disabledColor = \"text-disabled\",\n  readOnlyColor = \"text-subdued\",\n  validity,\n  iconColor = \"icon-inverted\",\n  validBorderColor = \"border-success\",\n  invalidBorderColor = \"border-error\",\n  validIconColor = \"icon-success\",\n  invalidIconColor = \"border-error\",\n  iconName,\n  iconAlt,\n  isTrailingIcon = false,\n  isHighlighted = false,\n  wrapperWidth,\n  wrapperMaxWidth,\n  ...props\n}: OakTextInputProps) => {\n  let finalBackgroundColor = background;\n  let finalBorderColor = borderColor;\n  let finalIconColor = iconColor;\n  let finalReadOnlyBorderColor = readOnlyBorderColor;\n\n  switch (true) {\n    case validity === \"valid\":\n      finalBorderColor = validBorderColor;\n      finalIconColor = validIconColor;\n      finalReadOnlyBorderColor = validBorderColor;\n      break;\n    case validity === \"invalid\":\n      finalBorderColor = invalidBorderColor;\n      finalIconColor = invalidIconColor;\n      finalReadOnlyBorderColor = invalidBorderColor;\n      break;\n    case isHighlighted:\n      finalBackgroundColor = highlightBackgroundColor;\n      break;\n  }\n\n  return (\n    <StyledTextInputWrapper\n      $height=\"fit-content\"\n      $width={wrapperWidth}\n      $maxWidth={wrapperMaxWidth}\n      $borderRadius=\"border-radius-s\"\n      $ba=\"border-solid-m\"\n      $borderColor={finalBorderColor}\n      $focusRingDropShadows={focusRingDropShadows}\n      $background={finalBackgroundColor}\n      $hoverBackground={hoverBackground}\n      $disabledBackgroundColor={disabledBackgroundColor}\n      $readOnlyBorderColor={finalReadOnlyBorderColor}\n      $disabledColor={disabledColor}\n      $readOnlyColor={readOnlyColor}\n      $color={color}\n      $alignItems=\"center\"\n      $position=\"relative\"\n      $gap=\"space-between-s\"\n      $ph=\"inner-padding-l\"\n      $disabled={!!props.disabled}\n      $readOnly={!!props.readOnly}\n      onClick={(event) => {\n        event.currentTarget.querySelector(\"input\")?.focus();\n      }}\n    >\n      {!isTrailingIcon && iconName && (\n        <OakIcon\n          iconName={iconName}\n          $colorFilter={finalIconColor}\n          $pointerEvents=\"none\"\n          $width={\"all-spacing-7\"}\n          alt={iconAlt}\n        />\n      )}\n\n      <OakFlex $flexGrow={1}>\n        <InternalTextInput\n          type={type}\n          {...props}\n          $width={\"100%\"}\n          $pv=\"inner-padding-l\"\n          $height=\"all-spacing-12\"\n        />\n      </OakFlex>\n      {isTrailingIcon && iconName && (\n        <OakIcon\n          iconName={iconName}\n          $colorFilter={finalIconColor}\n          $pointerEvents=\"none\"\n          $width={\"all-spacing-7\"}\n          alt={iconAlt}\n        />\n      )}\n    </StyledTextInputWrapper>\n  );\n};\n"],"names":["StyledTextInputWrapper","styled","OakFlex","props","$focusRingDropShadows","map","dropShadow","parseDropShadow","join","parseColor","$background","$readOnly","css","$hoverBackground","$readOnlyBorderColor","$readOnlyColor","$disabled","$disabledBackgroundColor","$disabledColor","OakTextInput","type","borderColor","readOnlyBorderColor","focusRingDropShadows","background","hoverBackground","disabledBackgroundColor","highlightBackgroundColor","color","disabledColor","readOnlyColor","validity","iconColor","validBorderColor","invalidBorderColor","validIconColor","invalidIconColor","iconName","iconAlt","isTrailingIcon","isHighlighted","wrapperWidth","wrapperMaxWidth","finalBackgroundColor","finalBorderColor","finalIconColor","finalReadOnlyBorderColor","React","createElement","$height","$width","$maxWidth","$borderRadius","$ba","$color","$alignItems","$position","$gap","$ph","disabled","readOnly","onClick","event","currentTarget","querySelector","focus","OakIcon","$pointerEvents","alt","InternalTextInput","$pv","$colorFilter"],"mappings":"szCA0FA,MAAMA,EAAyBC,EAAOC,EAAqC;;;;;;kBAMxDC,GACbA,EAAMC,sBACHC,KAAKC,GAAeC,EAAgBD,KACpCE,KAAK;;;gBAGGL,GAAUM,EAAWN,EAAMO;;IAEvCP,IACAA,EAAMQ,WACPC,CAAG;;;wBAGiBH,EAAWN,EAAMU;;;;;IAKpCV,GACDA,EAAMQ,WACNC,CAAG;sBACeH,EAAWN,EAAMW;eACxBL,EAAWN,EAAMY;;;IAG3BZ,GACDA,EAAMa,WACNJ,CAAG;oBACaH,EAAWN,EAAMc;eACtBR,EAAWN,EAAMe;;;;;EAUnBC,EAAe,EAC1BC,OAAO,OACPC,cAAc,iBACdC,sBAAsB,iBACtBC,uBAAuB,CACrB,6BACA,6BAEFC,aAAa,aACbC,kBAAkB,aAClBC,0BAA0B,aAC1BC,2BAA2B,sBAC3BC,QAAQ,eACRC,gBAAgB,gBAChBC,gBAAgB,eAChBC,WACAC,YAAY,gBACZC,mBAAmB,iBACnBC,qBAAqB,eACrBC,iBAAiB,eACjBC,mBAAmB,eACnBC,WACAC,UACAC,kBAAiB,EACjBC,iBAAgB,EAChBC,eACAC,qBACGvC,MAEH,IAAIwC,EAAuBnB,EACvBoB,EAAmBvB,EACnBwB,EAAiBb,EACjBc,EAA2BxB,EAE/B,QAAQ,GACN,IAAkB,UAAbS,EACHa,EAAmBX,EACnBY,EAAiBV,EACjBW,EAA2Bb,EAC3B,MACF,IAAkB,YAAbF,EACHa,EAAmBV,EACnBW,EAAiBT,EACjBU,EAA2BZ,EAC3B,MACF,KAAKM,EACHG,EAAuBhB,EAI3B,OACEoB,EAACC,cAAAhD,EACS,CAAAiD,QAAA,cACAC,OAAAT,EACGU,UAAAT,EACGU,cAAA,kBACVC,IAAA,8BACUT,EAAgBxC,sBACPmB,EAAoBb,YAC9BiC,EAAoB9B,iBACfY,EAAeR,yBACPS,EAAuBZ,qBAC3BgC,EAAwB5B,eAC9BW,EAAad,eACbe,EACRwB,OAAA1B,EACI2B,YAAA,SACFC,UAAA,WACLC,KAAA,kBACDC,IAAA,kBACO1C,YAAEb,EAAMwD,SACRhD,YAAER,EAAMyD,SACnBC,QAAUC,IACRA,EAAMC,cAAcC,cAAc,UAAUC,OAAO,IAGnD1B,GAAkBF,GAClBU,EAACC,cAAAkB,EACC,CAAA7B,SAAUA,eACIQ,EAAcsB,eACb,OACPjB,OAAA,gBACRkB,IAAK9B,IAITS,EAACC,cAAA9C,aAAmB,GAClB6C,EAAAC,cAACqB,EAAiB,CAChBjD,KAAMA,KACFjB,EACI+C,OAAA,OACJoB,IAAA,kBACIrB,QAAA,oBAGXV,GAAkBF,GACjBU,EAAAC,cAACkB,EACC,CAAA7B,SAAUA,EACIkC,aAAA1B,iBACC,OAAMK,OACb,gBACRkB,IAAK9B,IAIX"}